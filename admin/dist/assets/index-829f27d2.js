import{e as k,p as _,o as F,f as S,w as i,m as p,j as r,g as c,l as h,i as t,k as B,q as I,s as o,aX as L,N as d,v as D}from"./index-25b6f427.js";import{_ as R}from"./CommonPage-d9f08a53.js";import{_ as V,a as z}from"./CrudTable-4e3fed7c.js";import{_ as O}from"./CrudModal-b3ba9d09.js";import{u as P}from"./useCRUD-98c77b73.js";import{N as j}from"./Image-3d736508.js";import{N as u}from"./Input-4dc6aa48.js";import{N as K,a as f}from"./FormItem-d42d036b.js";import{N as T}from"./Popconfirm-48a94d36.js";import"./AppPage-77502b8b.js";import"./Space-5eeaf57e.js";import"./RadioGroup-9f11dd0d.js";import"./get-slot-1efb97e5.js";import"./Checkbox-09b0afd8.js";import"./Forward-98208075.js";import"./download-953ccaa2.js";import"./utils-a56d3b30.js";const se=Object.assign({name:"友链管理"},{__name:"index",setup(A){const n=k(null),m=k({keyword:""}),{modalVisible:v,modalTitle:w,modalLoading:N,handleAdd:x,handleDelete:y,handleEdit:U,handleSave:q,modalForm:s,modalFormRef:C}=P({name:"友链",initForm:{},doCreate:p.saveOrUpdateLink,doDelete:p.deleteLinks,doUpdate:p.saveOrUpdateLink,refresh:()=>{var a;return(a=n.value)==null?void 0:a.handleSearch()}});_(()=>{var a;(a=n.value)==null||a.handleSearch()});const $=[{type:"selection",width:15,fixed:"left"},{title:"头像",key:"avatar",width:40,align:"center",render(a){return o(j,{height:40,imgProps:{style:{"border-radius":"3px"}},src:a.avatar,"fallback-src":"http://dummyimage.com/400x400","show-toolbar-tooltip":!0})}},{title:"链接名称",key:"name",width:100,align:"center",ellipsis:{tooltip:!0}},{title:"链接地址",key:"address",width:120,align:"center",ellipsis:{tooltip:!0},render(a){return o("a",{class:"hover:underline hover:underline-blue-500 hover:underline-2 hover:underline-solid hover:underline-offset-4 cursor-pointer",onClick:()=>{const{copy:e}=L();e(a.address),$message.info("链接已经复制到剪切板!")}},a.address)}},{title:"链接介绍",key:"intro",width:120,align:"center",ellipsis:{tooltip:!0}},{title:"创建日期",key:"created_at",width:80,align:"center",render(a){return o(d,{size:"small",type:"text",ghost:!0},{default:()=>D(a.created_at),icon:()=>o("i",{class:"i-mdi:clock-time-three-outline"})})}},{title:"操作",key:"actions",width:100,align:"center",fixed:"right",render(a){return[o(d,{size:"small",type:"primary",onClick:()=>U(a)},{default:()=>"编辑",icon:()=>o("i",{class:"i-material-symbols:edit-outline"})}),o(T,{onPositiveClick:()=>y([a.id],!1)},{trigger:()=>o(d,{size:"small",type:"error",style:"margin-left: 15px;"},{default:()=>"删除",icon:()=>o("i",{class:"i-material-symbols:delete-outline"})}),default:()=>o("div",{},"确定删除该分类吗?")})]}}];return(a,e)=>(F(),S(R,{title:"友链管理"},{action:i(()=>{var l;return[r(t(d),{type:"primary",onClick:t(x)},{icon:i(()=>e[9]||(e[9]=[c("span",{class:"i-material-symbols:add"},null,-1)])),default:i(()=>[e[10]||(e[10]=h(" 新建友链 "))]),_:1},8,["onClick"]),r(t(d),{type:"error",disabled:!((l=n.value)!=null&&l.selections.length),onClick:e[0]||(e[0]=g=>{var b;return t(y)((b=n.value)==null?void 0:b.selections)})},{icon:i(()=>e[11]||(e[11]=[c("span",{class:"i-material-symbols:playlist-remove"},null,-1)])),default:i(()=>[e[12]||(e[12]=h(" 批量删除 "))]),_:1},8,["disabled"])]}),default:i(()=>[r(z,{ref_key:"$table",ref:n,"query-items":m.value,"onUpdate:queryItems":e[3]||(e[3]=l=>m.value=l),columns:$,"get-data":t(p).getLinks},{queryBar:i(()=>[r(V,{label:"友链名称 | 地址 | 介绍","label-width":150},{default:i(()=>[r(t(u),{value:m.value.keyword,"onUpdate:value":e[1]||(e[1]=l=>m.value.keyword=l),clearable:"",type:"text",placeholder:"搜索关键字",onKeydown:e[2]||(e[2]=B(l=>{var g;return(g=n.value)==null?void 0:g.handleSearch()},["enter"]))},null,8,["value"])]),_:1})]),_:1},8,["query-items","get-data"]),r(O,{visible:t(v),"onUpdate:visible":e[8]||(e[8]=l=>I(v)?v.value=l:null),title:t(w),loading:t(N),onSave:t(q)},{default:i(()=>[r(t(K),{ref_key:"modalFormRef",ref:C,"label-placement":"left","label-align":"left","label-width":80,model:t(s)},{default:i(()=>[r(t(f),{label:"链接名称",path:"name",rule:{required:!0,message:"请输入友链名称",trigger:["input","blur"]}},{default:i(()=>[r(t(u),{value:t(s).name,"onUpdate:value":e[4]||(e[4]=l=>t(s).name=l),placeholder:"请输入友链名称"},null,8,["value"])]),_:1}),r(t(f),{label:"链接头像",path:"avatar",rule:{required:!0,message:"请输入友链头像",trigger:["input","blur"]}},{default:i(()=>[r(t(u),{value:t(s).avatar,"onUpdate:value":e[5]||(e[5]=l=>t(s).avatar=l),placeholder:"请输入链接头像"},null,8,["value"])]),_:1}),r(t(f),{label:"链接地址",path:"address",rule:{required:!0,message:"请输入友链地址",trigger:["input","blur"]}},{default:i(()=>[r(t(u),{value:t(s).address,"onUpdate:value":e[6]||(e[6]=l=>t(s).address=l),placeholder:"请输入链接地址"},null,8,["value"])]),_:1}),r(t(f),{label:"链接介绍",path:"intro",rule:{required:!0,message:"请输入友链介绍",trigger:["input","blur"]}},{default:i(()=>[r(t(u),{value:t(s).intro,"onUpdate:value":e[7]||(e[7]=l=>t(s).intro=l),placeholder:"请输入友链地址"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","loading","onSave"])]),_:1}))}});export{se as default};
