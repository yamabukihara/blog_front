import{e as k,p as h,o as F,f as S,w as a,m as p,j as r,g as v,l as g,i as t,k as B,q as z,s as o,N as n,v as c}from"./index-25b6f427.js";import{_ as D}from"./CommonPage-d9f08a53.js";import{_ as I,a as R}from"./CrudTable-4e3fed7c.js";import{_ as V}from"./CrudModal-b3ba9d09.js";import{u as O}from"./useCRUD-98c77b73.js";import{N as w}from"./Input-4dc6aa48.js";import{N as j,a as E}from"./FormItem-d42d036b.js";import{N as K}from"./Popconfirm-48a94d36.js";import"./AppPage-77502b8b.js";import"./Space-5eeaf57e.js";import"./RadioGroup-9f11dd0d.js";import"./get-slot-1efb97e5.js";import"./Checkbox-09b0afd8.js";import"./Forward-98208075.js";import"./download-953ccaa2.js";const ae=Object.assign({name:"分类管理"},{__name:"index",setup(P){const s=k(null),m=k({keyword:""});h(()=>{var l;(l=s.value)==null||l.handleSearch()});const{modalVisible:f,modalTitle:C,modalLoading:x,handleAdd:N,handleDelete:b,handleEdit:_,handleSave:$,modalForm:y,modalFormRef:U}=O({name:"分类",initForm:{},doCreate:p.saveOrUpdateCategory,doDelete:p.deleteCategory,doUpdate:p.saveOrUpdateCategory,refresh:()=>{var l;return(l=s.value)==null?void 0:l.handleSearch()}}),q=[{type:"selection",width:15,fixed:"left"},{title:"分类名",key:"name",width:100,align:"center",ellipsis:{tooltip:!0}},{title:"文章量",key:"article_count",width:30,align:"center"},{title:"创建日期",key:"created_at",width:80,align:"center",render(l){return o(n,{size:"small",type:"text",ghost:!0},{default:()=>c(l.created_at),icon:()=>o("i",{class:"i-mdi:clock-time-three-outline"})})}},{title:"更新日期",key:"updated_at",width:80,align:"center",render(l){return o(n,{size:"small",type:"text",ghost:!0},{default:()=>c(l.updated_at),icon:()=>o("i",{class:"i-mdi:update"})})}},{title:"操作",key:"actions",width:100,align:"center",fixed:"right",render(l){return[o(n,{size:"small",type:"primary",onClick:()=>_(l)},{default:()=>"编辑",icon:()=>o("i",{class:"i-material-symbols:edit-outline"})}),o(K,{onPositiveClick:()=>b([l.id],!1)},{trigger:()=>o(n,{size:"small",type:"error",style:"margin-left: 15px;"},{default:()=>"删除",icon:()=>o("i",{class:"i-material-symbols:delete-outline"})}),default:()=>o("div",{},"确定删除该分类吗?")})]}}];return(l,e)=>(F(),S(D,{title:"分类管理"},{action:a(()=>{var i;return[r(t(n),{type:"primary",secondary:"",onClick:e[0]||(e[0]=u=>{var d;return(d=s.value)==null?void 0:d.handleExport()})},{icon:a(()=>e[7]||(e[7]=[v("i",{class:"i-mdi:download"},null,-1)])),default:a(()=>[e[8]||(e[8]=g(" 导出 "))]),_:1}),r(t(n),{type:"primary",onClick:t(N)},{icon:a(()=>e[9]||(e[9]=[v("i",{class:"i-material-symbols:add"},null,-1)])),default:a(()=>[e[10]||(e[10]=g(" 新建分类 "))]),_:1},8,["onClick"]),r(t(n),{type:"error",disabled:!((i=s.value)!=null&&i.selections.length),onClick:e[1]||(e[1]=u=>{var d;return t(b)((d=s.value)==null?void 0:d.selections)})},{icon:a(()=>e[11]||(e[11]=[v("span",{class:"i-material-symbols:playlist-remove"},null,-1)])),default:a(()=>[e[12]||(e[12]=g(" 批量删除 "))]),_:1},8,["disabled"])]}),default:a(()=>[r(R,{ref_key:"$table",ref:s,"query-items":m.value,"onUpdate:queryItems":e[4]||(e[4]=i=>m.value=i),columns:q,"get-data":t(p).getCategorys},{queryBar:a(()=>[r(I,{label:"分类名","label-width":50},{default:a(()=>[r(t(w),{value:m.value.keyword,"onUpdate:value":e[2]||(e[2]=i=>m.value.keyword=i),clearable:"",type:"text",placeholder:"请输入分类名",onKeydown:e[3]||(e[3]=B(i=>{var u;return(u=s.value)==null?void 0:u.handleSearch()},["enter"]))},null,8,["value"])]),_:1})]),_:1},8,["query-items","get-data"]),r(V,{visible:t(f),"onUpdate:visible":e[6]||(e[6]=i=>z(f)?f.value=i:null),title:t(C),loading:t(x),onSave:t($)},{default:a(()=>[r(t(j),{ref_key:"modalFormRef",ref:U,"label-placement":"left","label-align":"left","label-width":80,model:t(y)},{default:a(()=>[r(t(E),{label:"文章分类",path:"name",rule:{required:!0,message:"请输入分类名称",trigger:["input","blur"]}},{default:a(()=>[r(t(w),{value:t(y).name,"onUpdate:value":e[5]||(e[5]=i=>t(y).name=i),placeholder:"请输入分类名称",clearable:""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","loading","onSave"])]),_:1}))}});export{ae as default};
