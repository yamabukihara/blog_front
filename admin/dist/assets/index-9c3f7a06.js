import{G as ue,s as g,a9 as Sn,aa as Ne,e as P,ab as tn,ac as it,ad as ot,R as rt,M as U,ae as dt,Y as M,p as Kn,af as st,ag as _e,ah as Dn,ai as ct,F as O,X as ne,aj as B,ak as vn,al as xe,am as pe,an as ut,H as ft,Z as ht,J as Tn,ao as yn,ap as Le,K as F,L as Ue,U as ze,Q as Me,aq as Fe,ar as bn,as as gt,S as q,at as vt,au as ln,O as yt,av as kn,a2 as mn,aw as bt,o as je,f as an,w as V,m as we,j as X,g as xn,l as pn,i as K,k as kt,V as mt,a6 as xt,W as pt,q as wt,v as Nt,N as Ee,z as Rt}from"./index-25b6f427.js";import{_ as Ct}from"./CommonPage-d9f08a53.js";import{_ as St,a as Kt}from"./CrudTable-4e3fed7c.js";import{_ as Dt}from"./CrudModal-b3ba9d09.js";import{u as Tt}from"./useCRUD-98c77b73.js";import{N as Lt}from"./Checkbox-09b0afd8.js";import{c as wn}from"./Space-5eeaf57e.js";import{V as Ft}from"./RadioGroup-9f11dd0d.js";import{N as Et}from"./Switch-884df479.js";import{N as on}from"./Input-4dc6aa48.js";import{N as At,a as qe}from"./FormItem-d42d036b.js";import{N as Ot}from"./Popconfirm-48a94d36.js";import"./AppPage-77502b8b.js";import"./Forward-98208075.js";import"./download-953ccaa2.js";import"./get-slot-1efb97e5.js";function Ln(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const Pt=ue({name:"Switcher",render(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},g("path",{d:"M12 8l10 8l-10 8z"}))}}),Fn=Sn("n-tree-select");function Nn({position:e,offsetLevel:t,indent:f,el:h}){const c={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")c.left=0,c.top=0,c.bottom=0,c.borderRadius="inherit",c.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const o=e==="before"?"top":"bottom";c[o]=0,c.left=`${h.offsetLeft+6-t*f}px`,c.height="2px",c.backgroundColor="var(--n-drop-mark-color)",c.transformOrigin=o,c.borderRadius="1px",c.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return g("div",{style:c})}function Bt({dropPosition:e,node:t}){return t.isLeaf===!1||t.children?!0:e!=="inside"}const Ae=Sn("n-tree");function It({props:e,fNodesRef:t,mergedExpandedKeysRef:f,mergedSelectedKeysRef:h,mergedCheckedKeysRef:c,handleCheck:o,handleSelect:m,handleSwitcherClick:x}){const{value:b}=h,p=Ne(Fn,null),k=p?p.pendingNodeKeyRef:P(b.length?b[b.length-1]:null);function C(w){var T;if(!e.keyboard)return{enterBehavior:null};const{value:R}=k;let N=null;if(R===null){if((w.key==="ArrowDown"||w.key==="ArrowUp")&&w.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(w.key)&&R===null){const{value:v}=t;let i=0;for(;i<v.length;){if(!v[i].disabled){k.value=v[i].key;break}i+=1}}}else{const{value:v}=t;let i=v.findIndex(r=>r.key===R);if(!~i)return{enterBehavior:null};if(w.key==="Enter"){const r=v[i];switch(N=((T=e.overrideDefaultNodeClickBehavior)===null||T===void 0?void 0:T.call(e,{option:r.rawNode}))||null,N){case"toggleCheck":o(r,!c.value.includes(r.key));break;case"toggleSelect":m(r);break;case"toggleExpand":x(r);break;case"none":break;case"default":default:N="default",m(r)}}else if(w.key==="ArrowDown")for(w.preventDefault(),i+=1;i<v.length;){if(!v[i].disabled){k.value=v[i].key;break}i+=1}else if(w.key==="ArrowUp")for(w.preventDefault(),i-=1;i>=0;){if(!v[i].disabled){k.value=v[i].key;break}i-=1}else if(w.key==="ArrowLeft"){const r=v[i];if(r.isLeaf||!f.value.includes(R)){const y=r.getParent();y&&(k.value=y.key)}else x(r)}else if(w.key==="ArrowRight"){const r=v[i];if(r.isLeaf)return{enterBehavior:null};if(!f.value.includes(R))x(r);else for(i+=1;i<v.length;){if(!v[i].disabled){k.value=v[i].key;break}i+=1}}}return{enterBehavior:N}}return{pendingNodeKeyRef:k,handleKeydown:C}}const $t=ue({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const t=Ne(Ae);function f(c){const{onCheck:o}=e;o&&o(c)}function h(c){f(c)}return{handleUpdateValue:h,mergedTheme:t.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:t,checked:f,indeterminate:h,disabled:c,focusable:o,indent:m,handleUpdateValue:x}=this;return g("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],style:{width:`${m}px`},"data-checkbox":!0},g(Lt,{focusable:o,disabled:c,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,checked:f,indeterminate:h,onUpdateChecked:x}))}}),_t=ue({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:t,renderPrefixRef:f,renderSuffixRef:h,labelFieldRef:c}=Ne(Ae),o=P(null);function m(b){const{onClick:p}=e;p&&p(b)}function x(b){m(b)}return{selfRef:o,renderLabel:t,renderPrefix:f,renderSuffix:h,labelField:c,handleClick:x}},render(){const{clsPrefix:e,labelField:t,nodeProps:f,checked:h=!1,selected:c=!1,renderLabel:o,renderPrefix:m,renderSuffix:x,handleClick:b,onDragstart:p,tmNode:{rawNode:k,rawNode:{prefix:C,suffix:w,[t]:T}}}=this;return g("span",Object.assign({},f,{ref:"selfRef",class:[`${e}-tree-node-content`,f==null?void 0:f.class],onClick:b,draggable:p===void 0?void 0:!0,onDragstart:p}),m||C?g("div",{class:`${e}-tree-node-content__prefix`},m?m({option:k,selected:c,checked:h}):tn(C)):null,g("div",{class:`${e}-tree-node-content__text`},o?o({option:k,selected:c,checked:h}):tn(T)),x||w?g("div",{class:`${e}-tree-node-content__suffix`},x?x({option:k,selected:c,checked:h}):tn(w)):null)}}),Ut=ue({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function,tmNode:{type:Object,required:!0}},setup(e){const{renderSwitcherIconRef:t}=Ne(Ae,null);return()=>{const{clsPrefix:f,expanded:h,hide:c,indent:o,onClick:m}=e;return g("span",{"data-switcher":!0,class:[`${f}-tree-node-switcher`,h&&`${f}-tree-node-switcher--expanded`,c&&`${f}-tree-node-switcher--hide`],style:{width:`${o}px`},onClick:m},g("div",{class:`${f}-tree-node-switcher__icon`},g(it,null,{default:()=>{if(e.loading)return g(ot,{clsPrefix:f,key:"loading",radius:85,strokeWidth:20});const{value:x}=t;return x?x({expanded:e.expanded,selected:e.selected,option:e.tmNode.rawNode}):g(rt,{clsPrefix:f,key:"switcher"},{default:()=>g(Pt,null)})}})))}}});function zt(e){return U(()=>e.leafOnly?"child":e.checkStrategy)}function re(e,t){return!!e.rawNode[t]}function En(e,t,f,h){e==null||e.forEach(c=>{f(c),En(c[t],t,f,h),h(c)})}function Mt(e,t,f,h,c){const o=new Set,m=new Set,x=[];return En(e,h,b=>{if(x.push(b),c(t,b)){m.add(b[f]);for(let p=x.length-2;p>=0;--p)if(!o.has(x[p][f]))o.add(x[p][f]);else return}},()=>{x.pop()}),{expandedKeys:Array.from(o),highlightKeySet:m}}if(dt&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function jt(e,t,f,h,c){const o=new Set,m=new Set,x=new Set,b=[],p=[],k=[];function C(T){T.forEach(R=>{if(k.push(R),t(f,R)){o.add(R[h]),x.add(R[h]);for(let v=k.length-2;v>=0;--v){const i=k[v][h];if(!m.has(i))m.add(i),o.has(i)&&o.delete(i);else break}}const N=R[c];N&&C(N),k.pop()})}C(e);function w(T,R){T.forEach(N=>{const v=N[h],i=o.has(v),r=m.has(v);if(!i&&!r)return;const y=N[c];if(y)if(i)R.push(N);else{b.push(v);const I=Object.assign(Object.assign({},N),{[c]:[]});R.push(I),w(y,I[c])}else R.push(N)})}return w(e,p),{filteredTree:p,highlightKeySet:x,expandedKeys:b}}const qt=ue({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const t=Ne(Ae),{droppingNodeParentRef:f,droppingMouseNodeRef:h,draggingNodeRef:c,droppingPositionRef:o,droppingOffsetLevelRef:m,nodePropsRef:x,indentRef:b,blockLineRef:p,checkboxPlacementRef:k,checkOnClickRef:C,disabledFieldRef:w,showLineRef:T,renderSwitcherIconRef:R,overrideDefaultNodeClickBehaviorRef:N}=t,v=M(()=>!!e.tmNode.rawNode.checkboxDisabled),i=M(()=>re(e.tmNode,w.value)),r=M(()=>t.disabledRef.value||i.value),y=U(()=>{const{value:d}=x;if(d)return d({option:e.tmNode.rawNode})}),I=P(null),H={value:null};Kn(()=>{H.value=I.value.$el});function te(){const d=()=>{const{tmNode:S}=e;if(!S.isLeaf&&!S.shallowLoaded){if(!t.loadingKeysRef.value.has(S.key))t.loadingKeysRef.value.add(S.key);else return;const{onLoadRef:{value:E}}=t;E&&E(S.rawNode).then($=>{$!==!1&&t.handleSwitcherClick(S)}).finally(()=>{t.loadingKeysRef.value.delete(S.key)})}else t.handleSwitcherClick(S)};R.value?setTimeout(d,0):d()}const fe=M(()=>!i.value&&t.selectableRef.value&&(t.internalTreeSelect?t.mergedCheckStrategyRef.value!=="child"||t.multipleRef.value&&t.cascadeRef.value||e.tmNode.isLeaf:!0)),de=M(()=>t.checkableRef.value&&(t.cascadeRef.value||t.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),Re=M(()=>t.displayedCheckedKeysRef.value.includes(e.tmNode.key)),se=M(()=>{const{value:d}=de;if(!d)return!1;const{value:S}=C,{tmNode:E}=e;return typeof S=="boolean"?!E.disabled&&S:S(e.tmNode.rawNode)});function Ce(d){const{value:S}=t.expandOnClickRef,{value:E}=fe,{value:$}=se;if(!E&&!S&&!$||_e(d,"checkbox")||_e(d,"switcher"))return;const{tmNode:z}=e;E&&t.handleSelect(z),S&&!z.isLeaf&&te(),$&&le(!Re.value)}function Se(d){var S,E;if(!(_e(d,"checkbox")||_e(d,"switcher"))){if(!r.value){const $=N.value;let z=!1;if($)switch($({option:e.tmNode.rawNode})){case"toggleCheck":z=!0,le(!Re.value);break;case"toggleSelect":z=!0,t.handleSelect(e.tmNode);break;case"toggleExpand":z=!0,te(),z=!0;break;case"none":z=!0,z=!0;return}z||Ce(d)}(E=(S=y.value)===null||S===void 0?void 0:S.onClick)===null||E===void 0||E.call(S,d)}}function Ve(d){p.value||Se(d)}function Y(d){p.value&&Se(d)}function le(d){t.handleCheck(e.tmNode,d)}function ae(d){t.handleDragStart({event:d,node:e.tmNode})}function He(d){d.currentTarget===d.target&&t.handleDragEnter({event:d,node:e.tmNode})}function Z(d){d.preventDefault(),t.handleDragOver({event:d,node:e.tmNode})}function ie(d){t.handleDragEnd({event:d,node:e.tmNode})}function Ke(d){d.currentTarget===d.target&&t.handleDragLeave({event:d,node:e.tmNode})}function Ge(d){d.preventDefault(),o.value!==null&&t.handleDrop({event:d,node:e.tmNode,dropPosition:o.value})}const We=U(()=>{const{clsPrefix:d}=e,{value:S}=b;if(T.value){const E=[];let $=e.tmNode.parent;for(;$;)$.isLastChild?E.push(g("div",{class:`${d}-tree-node-indent`},g("div",{style:{width:`${S}px`}}))):E.push(g("div",{class:[`${d}-tree-node-indent`,`${d}-tree-node-indent--show-line`]},g("div",{style:{width:`${S}px`}}))),$=$.parent;return E.reverse()}else return st(e.tmNode.level,g("div",{class:`${e.clsPrefix}-tree-node-indent`},g("div",{style:{width:`${S}px`}})))});return{showDropMark:M(()=>{const{value:d}=c;if(!d)return;const{value:S}=o;if(!S)return;const{value:E}=h;if(!E)return;const{tmNode:$}=e;return $.key===E.key}),showDropMarkAsParent:M(()=>{const{value:d}=f;if(!d)return!1;const{tmNode:S}=e,{value:E}=o;return E==="before"||E==="after"?d.key===S.key:!1}),pending:M(()=>t.pendingNodeKeyRef.value===e.tmNode.key),loading:M(()=>t.loadingKeysRef.value.has(e.tmNode.key)),highlight:M(()=>{var d;return(d=t.highlightKeySetRef.value)===null||d===void 0?void 0:d.has(e.tmNode.key)}),checked:Re,indeterminate:M(()=>t.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:M(()=>t.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:M(()=>t.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:r,checkable:de,mergedCheckOnClick:se,checkboxDisabled:v,selectable:fe,expandOnClick:t.expandOnClickRef,internalScrollable:t.internalScrollableRef,draggable:t.draggableRef,blockLine:p,nodeProps:y,checkboxFocusable:t.internalCheckboxFocusableRef,droppingPosition:o,droppingOffsetLevel:m,indent:b,checkboxPlacement:k,showLine:T,contentInstRef:I,contentElRef:H,indentNodes:We,handleCheck:le,handleDrop:Ge,handleDragStart:ae,handleDragEnter:He,handleDragOver:Z,handleDragEnd:ie,handleDragLeave:Ke,handleLineClick:Y,handleContentClick:Ve,handleSwitcherClick:te}},render(){const{tmNode:e,clsPrefix:t,checkable:f,expandOnClick:h,selectable:c,selected:o,checked:m,highlight:x,draggable:b,blockLine:p,indent:k,indentNodes:C,disabled:w,pending:T,internalScrollable:R,nodeProps:N,checkboxPlacement:v}=this,i=b&&!w?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,r=R?Ln(e.key):void 0,y=v==="right",I=f?g($t,{indent:k,right:y,focusable:this.checkboxFocusable,disabled:w||this.checkboxDisabled,clsPrefix:t,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return g("div",Object.assign({class:`${t}-tree-node-wrapper`},i),g("div",Object.assign({},p?N:void 0,{class:[`${t}-tree-node`,{[`${t}-tree-node--selected`]:o,[`${t}-tree-node--checkable`]:f,[`${t}-tree-node--highlight`]:x,[`${t}-tree-node--pending`]:T,[`${t}-tree-node--disabled`]:w,[`${t}-tree-node--selectable`]:c,[`${t}-tree-node--clickable`]:c||h||this.mergedCheckOnClick},N==null?void 0:N.class],"data-key":r,draggable:b&&p,onClick:this.handleLineClick,onDragstart:b&&p&&!w?this.handleDragStart:void 0}),C,e.isLeaf&&this.showLine?g("div",{class:[`${t}-tree-node-indent`,`${t}-tree-node-indent--show-line`,e.isLeaf&&`${t}-tree-node-indent--is-leaf`,e.isLastChild&&`${t}-tree-node-indent--last-child`]},g("div",{style:{width:`${k}px`}})):g(Ut,{clsPrefix:t,expanded:this.expanded,selected:o,loading:this.loading,hide:e.isLeaf,tmNode:this.tmNode,indent:k,onClick:this.handleSwitcherClick}),y?null:I,g(_t,{ref:"contentInstRef",clsPrefix:t,checked:m,selected:o,onClick:this.handleContentClick,nodeProps:p?void 0:N,onDragstart:b&&!p&&!w?this.handleDragStart:void 0,tmNode:e}),b?this.showDropMark?Nn({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:k}):this.showDropMarkAsParent?Nn({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:k}):null:null,y?I:null))}}),An=qt,Vt=ue({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return g(ct,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>g("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:Dn(this.height)}},this.nodes.map(t=>g(An,{clsPrefix:e,tmNode:t})))})}}),rn=ut(),Ht=O("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[ne("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),ne(">",[O("tree-node",[ne("&:first-child","margin-top: 0;")])]),O("tree-motion-wrapper",[B("expand",[vn({duration:"0.2s"})]),B("collapse",[vn({duration:"0.2s",reverse:!0})])]),O("tree-node-wrapper",`
 box-sizing: border-box;
 padding: var(--n-node-wrapper-padding);
 `),O("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[B("highlight",[O("tree-node-content",[xe("text","border-bottom-color: var(--n-node-text-color-disabled);")])]),B("disabled",[O("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),pe("disabled",[B("clickable",[O("tree-node-content",`
 cursor: pointer;
 `)])])]),B("block-node",[O("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),pe("block-line",[O("tree-node",[pe("disabled",[O("tree-node-content",[ne("&:hover","background: var(--n-node-color-hover);")]),B("selectable",[O("tree-node-content",[ne("&:active","background: var(--n-node-color-pressed);")])]),B("pending",[O("tree-node-content",`
 background: var(--n-node-color-hover);
 `)]),B("selected",[O("tree-node-content","background: var(--n-node-color-active);")])]),B("selected",[O("tree-node-content","background: var(--n-node-color-active);")])])]),B("block-line",[O("tree-node",[pe("disabled",[ne("&:hover","background: var(--n-node-color-hover);"),B("pending",`
 background: var(--n-node-color-hover);
 `),B("selectable",[pe("selected",[ne("&:active","background: var(--n-node-color-pressed);")])]),B("selected","background: var(--n-node-color-active);")]),B("selected","background: var(--n-node-color-active);"),B("disabled",`
 cursor: not-allowed;
 `)])]),O("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 `,[B("show-line","position: relative",[ne("&::before",`
 position: absolute;
 left: 50%;
 border-left: 1px solid var(--n-line-color);
 transition: border-color .3s var(--n-bezier);
 transform: translate(-50%);
 content: "";
 top: var(--n-line-offset-top);
 bottom: var(--n-line-offset-bottom);
 `),B("last-child",[ne("&::before",`
 bottom: 50%;
 `)]),B("is-leaf",[ne("&::after",`
 position: absolute;
 content: "";
 left: calc(50% + 0.5px);
 right: 0;
 bottom: 50%;
 transition: border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-line-color);
 `)])]),pe("show-line","height: 0;")]),O("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: var(--n-node-content-height);
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[xe("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[O("icon",[rn]),O("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[rn]),O("base-icon",[rn])]),B("hide","visibility: hidden;"),B("expanded","transform: rotate(90deg);")]),O("tree-node-checkbox",`
 display: inline-flex;
 height: var(--n-node-content-height);
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 `),O("tree-node-content",`
 user-select: none;
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: var(--n-node-content-height);
 box-sizing: border-box;
 line-height: var(--n-line-height);
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[ne("&:last-child","margin-bottom: 0;"),xe("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),xe("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),xe("suffix",`
 display: inline-flex;
 `)]),xe("empty","margin: auto;")]);var Gt=globalThis&&globalThis.__awaiter||function(e,t,f,h){function c(o){return o instanceof f?o:new f(function(m){m(o)})}return new(f||(f=Promise))(function(o,m){function x(k){try{p(h.next(k))}catch(C){m(C)}}function b(k){try{p(h.throw(k))}catch(C){m(C)}}function p(k){k.done?o(k.value):c(k.value).then(x,b)}p((h=h.apply(e,t||[])).next())})};function Rn(e,t,f,h){return{getIsGroup(){return!1},getKey(o){return o[e]},getChildren:h||(o=>o[t]),getDisabled(o){return!!(o[f]||o.checkboxDisabled)}}}const Wt={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array],overrideDefaultNodeClickBehavior:Function},Xt=Object.assign(Object.assign(Object.assign(Object.assign({},Tn.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,showLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},scrollbarProps:Object,indent:{type:Number,default:24},allowDrop:{type:Function,default:Bt},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),Wt),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),Cn=ue({name:"Tree",props:Xt,slots:Object,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:f,mergedRtlRef:h}=ft(e),c=ht("Tree",h,t),o=Tn("Tree","-tree",Ht,bt,e,t),m=P(null),x=P(null),b=P(null);function p(){var n;return(n=b.value)===null||n===void 0?void 0:n.listElRef}function k(){var n;return(n=b.value)===null||n===void 0?void 0:n.itemsElRef}const C=U(()=>{const{filter:n}=e;if(n)return n;const{labelField:l}=e;return(a,s)=>{if(!a.length)return!0;const u=s[l];return typeof u=="string"?u.toLowerCase().includes(a.toLowerCase()):!1}}),w=U(()=>{const{pattern:n}=e;return n?!n.length||!C.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:jt(e.data,C.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),T=U(()=>yn(e.showIrrelevantNodes?e.data:w.value.filteredTree,Rn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),R=Ne(Fn,null),N=e.internalTreeSelect?R.dataTreeMate:U(()=>e.showIrrelevantNodes?T.value:yn(e.data,Rn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),{watchProps:v}=e,i=P([]);v!=null&&v.includes("defaultCheckedKeys")?Le(()=>{i.value=e.defaultCheckedKeys}):i.value=e.defaultCheckedKeys;const r=F(e,"checkedKeys"),y=Ue(r,i),I=U(()=>N.value.getCheckedKeys(y.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),H=zt(e),te=U(()=>I.value.checkedKeys),fe=U(()=>{const{indeterminateKeys:n}=e;return n!==void 0?n:I.value.indeterminateKeys}),de=P([]);v!=null&&v.includes("defaultSelectedKeys")?Le(()=>{de.value=e.defaultSelectedKeys}):de.value=e.defaultSelectedKeys;const Re=F(e,"selectedKeys"),se=Ue(Re,de),Ce=P([]),Se=n=>{Ce.value=e.defaultExpandAll?N.value.getNonLeafKeys():n===void 0?e.defaultExpandedKeys:n};v!=null&&v.includes("defaultExpandedKeys")?Le(()=>{Se(void 0)}):Le(()=>{Se(e.defaultExpandedKeys)});const Ve=F(e,"expandedKeys"),Y=Ue(Ve,Ce),le=U(()=>T.value.getFlattenedNodes(Y.value)),{pendingNodeKeyRef:ae,handleKeydown:He}=It({props:e,mergedCheckedKeysRef:y,mergedSelectedKeysRef:se,fNodesRef:le,mergedExpandedKeysRef:Y,handleCheck:Ze,handleSelect:en,handleSwitcherClick:cn});let Z=null,ie=null;const Ke=P(new Set),Ge=U(()=>e.internalHighlightKeySet||w.value.highlightKeySet),We=Ue(Ge,Ke),d=P(new Set),S=U(()=>Y.value.filter(n=>!d.value.has(n)));let E=0;const $=P(null),z=P(null),Oe=P(null),Pe=P(null),Be=P(0),On=U(()=>{const{value:n}=z;return n?n.parent:null});let Xe=!1;ze(F(e,"data"),()=>{Xe=!0,Me(()=>{Xe=!1}),d.value.clear(),ae.value=null,Te()},{deep:!1});let Ye=!1;const Qe=()=>{Ye=!0,Me(()=>{Ye=!1})};let De;ze(F(e,"pattern"),(n,l)=>{if(e.showIrrelevantNodes)if(De=void 0,n){const{expandedKeys:a,highlightKeySet:s}=Mt(e.data,e.pattern,e.keyField,e.childrenField,C.value);Ke.value=s,Qe(),ge(a,G(a),{node:null,action:"filter"})}else Ke.value=new Set;else if(!n.length)De!==void 0&&(Qe(),ge(De,G(De),{node:null,action:"filter"}));else{l.length||(De=Y.value);const{expandedKeys:a}=w.value;a!==void 0&&(Qe(),ge(a,G(a),{node:null,action:"filter"}))}});function dn(n){return Gt(this,void 0,void 0,function*(){const{onLoad:l}=e;if(!l){yield Promise.resolve();return}const{value:a}=d;if(!a.has(n.key)){a.add(n.key);try{(yield l(n.rawNode))===!1&&ve()}catch(s){console.error(s),ve()}a.delete(n.key)}})}Le(()=>{var n;const{value:l}=T;if(!l)return;const{getNode:a}=l;(n=Y.value)===null||n===void 0||n.forEach(s=>{const u=a(s);u&&!u.shallowLoaded&&dn(u)})});const he=P(!1),oe=P([]);ze(S,(n,l)=>{if(!e.animated||Ye){Me(Ie);return}if(Xe)return;const a=Fe(o.value.self.nodeHeight),s=new Set(l);let u=null,A=null;for(const L of n)if(!s.has(L)){if(u!==null)return;u=L}const j=new Set(n);for(const L of l)if(!j.has(L)){if(A!==null)return;A=L}if(u===null&&A===null)return;const{virtualScroll:W}=e,be=(W?b.value.listElRef:m.value).offsetHeight,ke=Math.ceil(be/a)+1;let Q;if(u!==null&&(Q=l),A!==null&&(Q===void 0?Q=n:Q=Q.filter(L=>L!==A)),he.value=!0,oe.value=T.value.getFlattenedNodes(Q),u!==null){const L=oe.value.findIndex(J=>J.key===u);if(~L){const J=oe.value[L].children;if(J){const ee=bn(J,n);oe.value.splice(L+1,0,{__motion:!0,mode:"expand",height:W?ee.length*a:void 0,nodes:W?ee.slice(0,ke):ee})}}}if(A!==null){const L=oe.value.findIndex(J=>J.key===A);if(~L){const J=oe.value[L].children;if(!J)return;he.value=!0;const ee=bn(J,n);oe.value.splice(L+1,0,{__motion:!0,mode:"collapse",height:W?ee.length*a:void 0,nodes:W?ee.slice(0,ke):ee})}}});const Pn=U(()=>gt(le.value)),Bn=U(()=>he.value?oe.value:le.value);function Ie(){const{value:n}=x;n&&n.sync()}function In(){he.value=!1,e.virtualScroll&&Me(Ie)}function G(n){const{getNode:l}=N.value;return n.map(a=>{var s;return((s=l(a))===null||s===void 0?void 0:s.rawNode)||null})}function ge(n,l,a){const{"onUpdate:expandedKeys":s,onUpdateExpandedKeys:u}=e;Ce.value=n,s&&q(s,n,l,a),u&&q(u,n,l,a)}function sn(n,l,a){const{"onUpdate:checkedKeys":s,onUpdateCheckedKeys:u}=e;i.value=n,u&&q(u,n,l,a),s&&q(s,n,l,a)}function $n(n,l){const{"onUpdate:indeterminateKeys":a,onUpdateIndeterminateKeys:s}=e;a&&q(a,n,l),s&&q(s,n,l)}function Je(n,l,a){const{"onUpdate:selectedKeys":s,onUpdateSelectedKeys:u}=e;de.value=n,u&&q(u,n,l,a),s&&q(s,n,l,a)}function _n(n){const{onDragenter:l}=e;l&&q(l,n)}function Un(n){const{onDragleave:l}=e;l&&q(l,n)}function zn(n){const{onDragend:l}=e;l&&q(l,n)}function Mn(n){const{onDragstart:l}=e;l&&q(l,n)}function jn(n){const{onDragover:l}=e;l&&q(l,n)}function qn(n){const{onDrop:l}=e;l&&q(l,n)}function Te(){Vn(),ce()}function Vn(){$.value=null}function ce(){Be.value=0,z.value=null,Oe.value=null,Pe.value=null,ve()}function ve(){Z&&(window.clearTimeout(Z),Z=null),ie=null}function Ze(n,l){if(e.disabled||re(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){en(n);return}const a=l?"check":"uncheck",{checkedKeys:s,indeterminateKeys:u}=N.value[a](n.key,te.value,{cascade:e.cascade,checkStrategy:H.value,allowNotLoaded:e.allowCheckingNotLoaded});sn(s,G(s),{node:n.rawNode,action:a}),$n(u,G(u))}function Hn(n){if(e.disabled)return;const{key:l}=n,{value:a}=Y,s=a.findIndex(u=>u===l);if(~s){const u=Array.from(a);u.splice(s,1),ge(u,G(u),{node:n.rawNode,action:"collapse"})}else{const u=T.value.getNode(l);if(!u||u.isLeaf)return;let A;if(e.accordion){const j=new Set(n.siblings.map(({key:W})=>W));A=a.filter(W=>!j.has(W)),A.push(l)}else A=a.concat(l);ge(A,G(A),{node:n.rawNode,action:"expand"})}}function cn(n){e.disabled||he.value||Hn(n)}function en(n){if(!(e.disabled||!e.selectable)){if(ae.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:l,indeterminateKeys:a}}=I;e.multiple?Ze(n,!(l.includes(n.key)||a.includes(n.key))):sn([n.key],G([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const l=Array.from(se.value),a=l.findIndex(s=>s===n.key);~a?e.cancelable&&l.splice(a,1):~a||l.push(n.key),Je(l,G(l),{node:n.rawNode,action:~a?"unselect":"select"})}else se.value.includes(n.key)?e.cancelable&&Je([],[],{node:n.rawNode,action:"unselect"}):Je([n.key],G([n.key]),{node:n.rawNode,action:"select"})}}function Gn(n){if(Z&&(window.clearTimeout(Z),Z=null),n.isLeaf)return;ie=n.key;const l=()=>{if(ie!==n.key)return;const{value:a}=Oe;if(a&&a.key===n.key&&!Y.value.includes(n.key)){const s=Y.value.concat(n.key);ge(s,G(s),{node:n.rawNode,action:"expand"})}Z=null,ie=null};n.shallowLoaded?Z=window.setTimeout(()=>{l()},1e3):Z=window.setTimeout(()=>{dn(n).then(()=>{l()})},1e3)}function Wn({event:n,node:l}){!e.draggable||e.disabled||re(l,e.disabledField)||(un({event:n,node:l},!1),_n({event:n,node:l.rawNode}))}function Xn({event:n,node:l}){!e.draggable||e.disabled||re(l,e.disabledField)||Un({event:n,node:l.rawNode})}function Yn(n){n.target===n.currentTarget&&ce()}function Qn({event:n,node:l}){Te(),!(!e.draggable||e.disabled||re(l,e.disabledField))&&zn({event:n,node:l.rawNode})}function Jn({event:n,node:l}){!e.draggable||e.disabled||re(l,e.disabledField)||(E=n.clientX,$.value=l,Mn({event:n,node:l.rawNode}))}function un({event:n,node:l},a=!0){var s;if(!e.draggable||e.disabled||re(l,e.disabledField))return;const{value:u}=$;if(!u)return;const{allowDrop:A,indent:j}=e;a&&jn({event:n,node:l.rawNode});const W=n.currentTarget,{height:be,top:ke}=W.getBoundingClientRect(),Q=n.clientY-ke;let L;A({node:l.rawNode,dropPosition:"inside",phase:"drag"})?Q<=8?L="before":Q>=be-8?L="after":L="inside":Q<=be/2?L="before":L="after";const{value:ee}=Pn;let D,_;const me=ee(l.key);if(me===null){ce();return}let $e=!1;L==="inside"?(D=l,_="inside"):L==="before"?l.isFirstChild?(D=l,_="before"):(D=le.value[me-1],_="after"):(D=l,_="after"),!D.isLeaf&&Y.value.includes(D.key)&&($e=!0,_==="after"&&(D=le.value[me+1],D?_="before":(D=l,_="inside")));const hn=D;if(Oe.value=hn,!$e&&u.isLastChild&&u.key===D.key&&(_="after"),_==="after"){let gn=E-n.clientX,nn=0;for(;gn>=j/2&&D.parent!==null&&D.isLastChild&&nn<1;)gn-=j,nn+=1,D=D.parent;Be.value=nn}else Be.value=0;if((u.contains(D)||_==="inside"&&((s=u.parent)===null||s===void 0?void 0:s.key)===D.key)&&!(u.key===hn.key&&u.key===D.key)){ce();return}if(!A({node:D.rawNode,dropPosition:_,phase:"drag"})){ce();return}if(u.key===D.key)ve();else if(ie!==D.key)if(_==="inside"){if(e.expandOnDragenter){if(Gn(D),!D.shallowLoaded&&ie!==D.key){Te();return}}else if(!D.shallowLoaded){Te();return}}else ve();else _!=="inside"&&ve();Pe.value=_,z.value=D}function Zn({event:n,node:l,dropPosition:a}){if(!e.draggable||e.disabled||re(l,e.disabledField))return;const{value:s}=$,{value:u}=z,{value:A}=Pe;if(!(!s||!u||!A)&&e.allowDrop({node:u.rawNode,dropPosition:A,phase:"drag"})&&s.key!==u.key){if(A==="before"){const j=s.getNext({includeDisabled:!0});if(j&&j.key===u.key){ce();return}}if(A==="after"){const j=s.getPrev({includeDisabled:!0});if(j&&j.key===u.key){ce();return}}qn({event:n,node:u.rawNode,dragNode:s.rawNode,dropPosition:a}),Te()}}function et(){Ie()}function nt(){Ie()}function tt(n){var l;if(e.virtualScroll||e.internalScrollable){const{value:a}=x;if(!((l=a==null?void 0:a.containerRef)===null||l===void 0)&&l.contains(n.relatedTarget))return;ae.value=null}else{const{value:a}=m;if(a!=null&&a.contains(n.relatedTarget))return;ae.value=null}}ze(ae,n=>{var l,a;if(n!==null){if(e.virtualScroll)(l=b.value)===null||l===void 0||l.scrollTo({key:n});else if(e.internalScrollable){const{value:s}=x;if(s===null)return;const u=(a=s.contentRef)===null||a===void 0?void 0:a.querySelector(`[data-key="${Ln(n)}"]`);if(!u)return;s.scrollTo({el:u})}}}),vt(Ae,{loadingKeysRef:d,highlightKeySetRef:We,displayedCheckedKeysRef:te,displayedIndeterminateKeysRef:fe,mergedSelectedKeysRef:se,mergedExpandedKeysRef:Y,mergedThemeRef:o,mergedCheckStrategyRef:H,nodePropsRef:F(e,"nodeProps"),disabledRef:F(e,"disabled"),checkableRef:F(e,"checkable"),selectableRef:F(e,"selectable"),expandOnClickRef:F(e,"expandOnClick"),onLoadRef:F(e,"onLoad"),draggableRef:F(e,"draggable"),blockLineRef:F(e,"blockLine"),indentRef:F(e,"indent"),cascadeRef:F(e,"cascade"),checkOnClickRef:F(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:Oe,droppingNodeParentRef:On,draggingNodeRef:$,droppingPositionRef:Pe,droppingOffsetLevelRef:Be,fNodesRef:le,pendingNodeKeyRef:ae,showLineRef:F(e,"showLine"),disabledFieldRef:F(e,"disabledField"),internalScrollableRef:F(e,"internalScrollable"),internalCheckboxFocusableRef:F(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:F(e,"renderLabel"),renderPrefixRef:F(e,"renderPrefix"),renderSuffixRef:F(e,"renderSuffix"),renderSwitcherIconRef:F(e,"renderSwitcherIcon"),labelFieldRef:F(e,"labelField"),multipleRef:F(e,"multiple"),overrideDefaultNodeClickBehaviorRef:F(e,"overrideDefaultNodeClickBehavior"),handleSwitcherClick:cn,handleDragEnd:Qn,handleDragEnter:Wn,handleDragLeave:Xn,handleDragStart:Jn,handleDrop:Zn,handleDragOver:un,handleSelect:en,handleCheck:Ze});function lt(n,l){var a,s;typeof n=="number"?(a=b.value)===null||a===void 0||a.scrollTo(n,l||0):(s=b.value)===null||s===void 0||s.scrollTo(n)}const at={handleKeydown:He,scrollTo:lt,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=I.value;return{keys:n,options:G(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=I.value;return{keys:n,options:G(n)}}},fn=U(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:l,nodeBorderRadius:a,nodeColorHover:s,nodeColorPressed:u,nodeColorActive:A,arrowColor:j,loadingColor:W,nodeTextColor:be,nodeTextColorDisabled:ke,dropMarkColor:Q,nodeWrapperPadding:L,nodeHeight:J,lineHeight:ee,lineColor:D}}=o.value,_=ln(L,"top"),me=ln(L,"bottom"),$e=Dn(Fe(J)-Fe(_)-Fe(me));return{"--n-arrow-color":j,"--n-loading-color":W,"--n-bezier":n,"--n-font-size":l,"--n-node-border-radius":a,"--n-node-color-active":A,"--n-node-color-hover":s,"--n-node-color-pressed":u,"--n-node-text-color":be,"--n-node-text-color-disabled":ke,"--n-drop-mark-color":Q,"--n-node-wrapper-padding":L,"--n-line-offset-top":`-${_}`,"--n-line-offset-bottom":`-${me}`,"--n-node-content-height":$e,"--n-line-height":ee,"--n-line-color":D}}),ye=f?yt("tree",void 0,fn,e):void 0;return Object.assign(Object.assign({},at),{mergedClsPrefix:t,mergedTheme:o,rtlEnabled:c,fNodes:Bn,aip:he,selfElRef:m,virtualListInstRef:b,scrollbarInstRef:x,handleFocusout:tt,handleDragLeaveTree:Yn,handleScroll:et,getScrollContainer:p,getScrollContent:k,handleAfterEnter:In,handleResize:nt,cssVars:f?void 0:fn,themeClass:ye==null?void 0:ye.themeClass,onRender:ye==null?void 0:ye.onRender})},render(){var e;const{fNodes:t,internalRenderEmpty:f}=this;if(!t.length&&f)return f();const{mergedClsPrefix:h,blockNode:c,blockLine:o,draggable:m,disabled:x,internalFocusable:b,checkable:p,handleKeydown:k,rtlEnabled:C,handleFocusout:w,scrollbarProps:T}=this,R=b&&!x,N=R?"0":void 0,v=[`${h}-tree`,C&&`${h}-tree--rtl`,p&&`${h}-tree--checkable`,(o||c)&&`${h}-tree--block-node`,o&&`${h}-tree--block-line`],i=y=>"__motion"in y?g(Vt,{height:y.height,nodes:y.nodes,clsPrefix:h,mode:y.mode,onAfterEnter:this.handleAfterEnter}):g(An,{key:y.key,tmNode:y,clsPrefix:h});if(this.virtualScroll){const{mergedTheme:y,internalScrollablePadding:I}=this,H=ln(I||"0");return g(kn,Object.assign({},T,{ref:"scrollbarInstRef",onDragleave:m?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:v,theme:y.peers.Scrollbar,themeOverrides:y.peerOverrides.Scrollbar,tabindex:N,onKeydown:R?k:void 0,onFocusout:R?w:void 0}),{default:()=>{var te;return(te=this.onRender)===null||te===void 0||te.call(this),t.length?g(Ft,{ref:"virtualListInstRef",items:this.fNodes,itemSize:Fe(y.self.nodeHeight),ignoreItemResize:this.aip,paddingTop:H.top,paddingBottom:H.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:H.left,paddingRight:H.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:fe})=>i(fe)}):mn(this.$slots.empty,()=>[g(wn,{class:`${h}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])}})}const{internalScrollable:r}=this;return v.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),r?g(kn,Object.assign({},T,{class:v,tabindex:N,onKeydown:R?k:void 0,onFocusout:R?w:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}}),{default:()=>g("div",{onDragleave:m?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(i))}):g("div",{class:v,tabindex:N,ref:"selfElRef",style:this.cssVars,onKeydown:R?k:void 0,onFocusout:R?w:void 0,onDragleave:m?this.handleDragLeaveTree:void 0},t.length?t.map(i):mn(this.$slots.empty,()=>[g(wn,{class:`${h}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}}),fl=Object.assign({name:"角色管理"},{__name:"index",setup(e){const t=P(null),f=P({keyword:""}),{modalVisible:h,modalAction:c,modalTitle:o,modalLoading:m,handleAdd:x,handleDelete:b,handleEdit:p,handleSave:k,modalForm:C,modalFormRef:w}=Tt({name:"角色",initForm:{},doCreate:we.saveOrUpdateRole,doDelete:we.deleteRole,doUpdate:we.saveOrUpdateRole,refresh:()=>{var i;return(i=t.value)==null?void 0:i.handleSearch()}}),T=P(!0),R=P([]),N=P([]);Kn(()=>{var i;(i=t.value)==null||i.handleSearch()});const v=[{type:"selection",width:15,fixed:"left"},{title:"角色名",key:"name",width:80,align:"center",ellipsis:{tooltip:!0}},{title:"角色标签",key:"label",width:80,align:"center",render(i){return g(Rt,{type:"info"},{default:()=>i.label})}},{title:"创建日期",key:"created_at",width:60,align:"center",render(i){return g("span",Nt(i.created_at))}},{title:"是否禁用",key:"is_disable",width:30,align:"center",fixed:"left",render(i){return g(Et,{size:"small",rubberBand:!1,value:i.is_disable,loading:!!i.publishing,checkedValue:1,uncheckedValue:0,onUpdateValue:()=>$message.info("这个功能暂时还不支持~")})}},{title:"操作",key:"actions",width:100,align:"center",fixed:"right",render(i){return[g(Ee,{size:"tiny",quaternary:!0,type:"info",onClick:async()=>{T.value=!0,await we.getMenuOption().then(r=>N.value=r.data),p(i)}},{default:()=>"菜单权限",icon:()=>g("i",{class:"i-material-symbols:edit-outline"})}),g(Ee,{size:"tiny",quaternary:!0,type:"info",onClick:async()=>{T.value=!1,await we.getResourceOption().then(r=>R.value=r.data),p(i)}},{default:()=>"资源权限",icon:()=>g("i",{class:"i-ic:baseline-folder-open"})}),g(Ot,{onPositiveClick:()=>b([i.id],!1),onNegativeClick:()=>{}},{trigger:()=>g(Ee,{size:"small",type:"error",style:"margin-left: 15px;"},{default:()=>"删除",icon:()=>g("i",{class:"i-material-symbols:delete-outline"})}),default:()=>g("div",{},"确定删除该角色吗?")})]}}];return(i,r)=>(je(),an(Ct,{title:"角色管理"},{action:V(()=>{var y;return[X(K(Ee),{type:"primary",onClick:K(x)},{icon:V(()=>r[9]||(r[9]=[xn("i",{class:"i-material-symbols:add"},null,-1)])),default:V(()=>[r[10]||(r[10]=pn(" 新建角色 "))]),_:1},8,["onClick"]),X(K(Ee),{type:"error",disabled:!((y=t.value)!=null&&y.selections.length),onClick:r[0]||(r[0]=I=>{var H;return K(b)((H=t.value)==null?void 0:H.selections)})},{icon:V(()=>r[11]||(r[11]=[xn("i",{class:"i-material-symbols:add"},null,-1)])),default:V(()=>[r[12]||(r[12]=pn(" 批量删除 "))]),_:1},8,["disabled"])]}),default:V(()=>[X(Kt,{ref_key:"$table",ref:t,"query-items":f.value,"onUpdate:queryItems":r[3]||(r[3]=y=>f.value=y),columns:v,"get-data":K(we).getRoles},{queryBar:V(()=>[X(St,{label:"角色名","label-width":50},{default:V(()=>[X(K(on),{value:f.value.keyword,"onUpdate:value":r[1]||(r[1]=y=>f.value.keyword=y),clearable:"",type:"text",placeholder:"请输入角色名",onKeydown:r[2]||(r[2]=kt(y=>{var I;return(I=t.value)==null?void 0:I.handleSearch()},["enter"]))},null,8,["value"])]),_:1})]),_:1},8,["query-items","get-data"]),X(Dt,{visible:K(h),"onUpdate:visible":r[8]||(r[8]=y=>wt(h)?h.value=y:null),title:K(o),loading:K(m),onSave:K(k)},{default:V(()=>[X(K(At),{ref_key:"modalFormRef",ref:w,"label-placement":"left","label-align":"left","label-width":80,model:K(C),disabled:K(c)==="view"},{default:V(()=>[X(K(qe),{label:"角色名",path:"name"},{default:V(()=>[X(K(on),{value:K(C).name,"onUpdate:value":r[4]||(r[4]=y=>K(C).name=y),placeholder:"请输入角色名称"},null,8,["value"])]),_:1}),X(K(qe),{label:"角色标签",path:"name"},{default:V(()=>[X(K(on),{value:K(C).label,"onUpdate:value":r[5]||(r[5]=y=>K(C).label=y),placeholder:"请输入角色标签"},null,8,["value"])]),_:1}),K(c)==="edit"?(je(),mt(xt,{key:0},[T.value?(je(),an(K(qe),{key:0,label:"菜单权限",path:"menu_ids"},{default:V(()=>[X(K(Cn),{data:N.value,"checked-keys":K(C).menu_ids,checkable:"","expand-on-click":"","block-line":"","onUpdate:checkedKeys":r[6]||(r[6]=y=>K(C).menu_ids=y)},null,8,["data","checked-keys"])]),_:1})):(je(),an(K(qe),{key:1,label:"资源权限",path:"resource_ids"},{default:V(()=>[X(K(Cn),{data:R.value,"checked-keys":K(C).resource_ids,"block-line":"",checkable:"","expand-on-click":"",cascade:"",accordion:"","onUpdate:checkedKeys":r[7]||(r[7]=y=>K(C).resource_ids=y)},null,8,["data","checked-keys"])]),_:1}))],64)):pt("",!0)]),_:1},8,["model","disabled"])]),_:1},8,["visible","title","loading","onSave"])]),_:1}))}});export{fl as default};
