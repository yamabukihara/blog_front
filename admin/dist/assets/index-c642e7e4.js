import{e as v,p as q,o as T,f as F,w as i,m,j as o,g as c,l as b,i as a,k as z,q as B,s as r,N as s,z as D,v as k}from"./index-25b6f427.js";import{_ as I}from"./CommonPage-d9f08a53.js";import{_ as R,a as V}from"./CrudTable-4e3fed7c.js";import{_ as O}from"./CrudModal-b3ba9d09.js";import{u as j}from"./useCRUD-98c77b73.js";import{N as h}from"./Input-4dc6aa48.js";import{N as K,a as P}from"./FormItem-d42d036b.js";import{N as A}from"./Popconfirm-48a94d36.js";import"./AppPage-77502b8b.js";import"./Space-5eeaf57e.js";import"./RadioGroup-9f11dd0d.js";import"./get-slot-1efb97e5.js";import"./Checkbox-09b0afd8.js";import"./Forward-98208075.js";import"./download-953ccaa2.js";const re=Object.assign({name:"标签管理"},{__name:"index",setup(E){const n=v(null),d=v({keyword:""});q(()=>{var t;(t=n.value)==null||t.handleSearch()});const{modalVisible:u,modalTitle:w,modalLoading:_,handleAdd:N,handleDelete:y,handleEdit:x,handleSave:C,modalForm:p,modalFormRef:S}=j({name:"标签",initForm:{},doCreate:m.saveOrUpdateTag,doDelete:m.deleteTag,doUpdate:m.saveOrUpdateTag,refresh:()=>{var t;return(t=n.value)==null?void 0:t.handleSearch()}}),U=[{type:"selection",width:15,fixed:"left"},{title:"标签名",key:"name",width:100,align:"center",render(t){return r(D,{type:"info"},{default:()=>t.name})}},{title:"文章量",key:"article_count",width:30,align:"center"},{title:"创建日期",key:"created_at",width:80,align:"center",render(t){return r(s,{size:"small",type:"text",ghost:!0},{default:()=>k(t.created_at),icon:()=>r("i",{class:"i-mdi:clock-time-three-outline"})})}},{title:"更新日期",key:"updated_at",width:80,align:"center",render(t){return r(s,{size:"small",type:"text",ghost:!0},{default:()=>k(t.updated_at),icon:()=>r("i",{class:"i-mdi:update"})})}},{title:"操作",key:"actions",width:100,align:"center",fixed:"right",render(t){return[r(s,{size:"small",type:"primary",onClick:()=>x(t)},{default:()=>"编辑",icon:()=>r("i",{class:"i-material-symbols:edit-outline"})}),r(A,{onPositiveClick:()=>y([t.id],!1)},{trigger:()=>r(s,{size:"small",type:"error",style:"margin-left: 15px;"},{default:()=>"删除",icon:()=>r("i",{class:"i-material-symbols:delete-outline"})}),default:()=>r("div",{},"确定删除该标签吗?")})]}}];function $(t){}return(t,e)=>(T(),F(I,{title:"标签管理"},{action:i(()=>{var l;return[o(a(s),{type:"primary",onClick:a(N)},{icon:i(()=>e[6]||(e[6]=[c("i",{class:"i-material-symbols:add"},null,-1)])),default:i(()=>[e[7]||(e[7]=b(" 新建标签 "))]),_:1},8,["onClick"]),o(a(s),{type:"error",disabled:!((l=n.value)!=null&&l.selections.length),onClick:e[0]||(e[0]=f=>{var g;return a(y)((g=n.value)==null?void 0:g.selections)})},{icon:i(()=>e[8]||(e[8]=[c("span",{class:"i-material-symbols:playlist-remove"},null,-1)])),default:i(()=>[e[9]||(e[9]=b(" 批量删除 "))]),_:1},8,["disabled"])]}),default:i(()=>[o(V,{ref_key:"$table",ref:n,"query-items":d.value,"onUpdate:queryItems":e[3]||(e[3]=l=>d.value=l),columns:U,"get-data":a(m).getTags,onSorterChange:$},{queryBar:i(()=>[o(R,{label:"标签名","label-width":50},{default:i(()=>[o(a(h),{value:d.value.keyword,"onUpdate:value":e[1]||(e[1]=l=>d.value.keyword=l),clearable:"",type:"text",placeholder:"请输入标签名",onKeydown:e[2]||(e[2]=z(l=>{var f;return(f=n.value)==null?void 0:f.handleSearch()},["enter"]))},null,8,["value"])]),_:1})]),_:1},8,["query-items","get-data"]),o(O,{visible:a(u),"onUpdate:visible":e[5]||(e[5]=l=>B(u)?u.value=l:null),title:a(w),loading:a(_),onSave:a(C)},{default:i(()=>[o(a(K),{ref_key:"modalFormRef",ref:S,"label-placement":"left","label-align":"left","label-width":80,model:a(p)},{default:i(()=>[o(a(P),{label:"文章标签",path:"name",rule:{required:!0,message:"请输入标签名称",trigger:["input","blur"]}},{default:i(()=>[o(a(h),{value:a(p).name,"onUpdate:value":e[4]||(e[4]=l=>a(p).name=l),placeholder:"请输入标签名称",clearable:""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","loading","onSave"])]),_:1}))}});export{re as default};
