import{_ as N,u as k,a as D,b as L,c as T,r as R,d as V,e as B,o as C,f as J,w as _,g as l,h as O,t as U,i,j as d,k as j,l as q,N as K,m as $,n as E}from"./index-25b6f427.js";import{_ as A}from"./AppPage-77502b8b.js";import{N as x}from"./Input-4dc6aa48.js";import{N as F}from"./Checkbox-09b0afd8.js";const h="__SecretKey__";function P(t,s,o=60*60*24*7){const a=JSON.stringify({value:s,time:Date.now(),expire:o?new Date().getTime()+o*1e3:null});window.localStorage.setItem(t,z(a))}function Y(t){const s=window.localStorage.getItem(t);if(s){const o=G(s),{value:a,expire:u}=JSON.parse(o);if(!u||u>new Date().getTime())return a}return v(t),null}function v(t){window.localStorage.removeItem(t)}function z(t){const s=JSON.stringify(t);return btoa(h+s)}function G(t){const o=atob(t).replace(h,"");try{return JSON.parse(o)}catch{return null}}const H="/admin/image/login_banner.webp";const M={style:{transform:"translateY(25px)"},class:"m-auto max-w-[700px] min-w-[345px] flex items-center justify-center rounded-2 bg-white bg-opacity-60 p-4 shadow"},Q={class:"w-[320px] flex flex-col px-4 py-9 space-y-5.5"},W={class:"flex items-center justify-center text-2xl text-gray font-normal"},X={__name:"Login",setup(t){const s={}.VITE_TITLE,o=k(),a=D(),u=L(),{query:p}=T(),n=R({username:"guest",password:"123456"});b();function b(){const r=Y("loginInfo");r&&(n.username=r.username,n.password=r.password)}const m=V("isRemember",!1),f=B(!1);async function g(){const{username:r,password:e}=n;if(!r||!e){$message.warning("请输入用户名和密码");return}(async(w,y)=>{f.value=!0;try{const S=await $.login({username:w,password:y});if(a.setToken(S.data.token),await o.getUserInfo(),await E(),m?P("loginInfo",{username:w,password:y}):v("loginInfo"),$message.success("登录成功"),p.redirect){const I=p.redirect;Reflect.deleteProperty(p,"redirect"),u.push({path:I,query:p})}else u.push("/")}finally{f.value=!1}})(r,e)}return(r,e)=>(C(),J(A,{class:"backgroundImg bg-cover"},{default:_(()=>[l("div",M,[e[4]||(e[4]=l("div",{class:"hidden w-[380px] px-5 py-9 md:block"},[l("img",{src:H,class:"w-full",alt:"login_banner"})],-1)),l("div",Q,[l("h5",W,[e[2]||(e[2]=l("img",{src:O,alt:"logo",class:"mr-2 h-[50px] w-[50px]"},null,-1)),l("span",null,U(i(s)),1)]),d(i(x),{value:n.username,"onUpdate:value":e[0]||(e[0]=c=>n.username=c),class:"h-[50px] items-center pl-2",autofocus:"",placeholder:"test@qq.com",maxlength:20},null,8,["value"]),d(i(x),{value:n.password,"onUpdate:value":e[1]||(e[1]=c=>n.password=c),class:"h-[50px] items-center pl-2",type:"password","show-password-on":"mousedown",placeholder:"11111",maxlength:20,onKeydown:j(g,["enter"])},null,8,["value"]),d(i(F),{checked:i(m),label:"记住我","on-update:checked":c=>m.value=c},null,8,["checked","on-update:checked"]),d(i(K),{class:"h-[50px] w-full rounded-5",type:"primary",loading:f.value,onClick:g},{default:_(()=>e[3]||(e[3]=[q(" 登录 ")])),_:1},8,["loading"])])])]),_:1}))}},oe=N(X,[["__scopeId","data-v-cef7cb57"]]);export{oe as default};
