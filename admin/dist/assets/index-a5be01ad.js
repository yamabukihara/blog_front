import{G as Be,s as u,A as He,B as Ke,D as Ge,C as We,X as Xe,F as he,H as Je,J as Re,I as Qe,e as R,K as Ye,L as Ze,Y as C,U as et,Z as tt,M as it,$ as nt,a0 as ge,a1 as be,a2 as ke,R as ye,a3 as xe,S as O,Q as lt,a4 as at,o as U,V as H,j as d,w as c,i as n,g as me,a5 as Y,l as G,a6 as ot,a7 as ut,a8 as dt,p as rt,f as J,m as A,k as st,W as de,q as ct,z as re,v as mt,N as Q}from"./index-25b6f427.js";import{_ as ft}from"./CommonPage-d9f08a53.js";import{_ as pt,a as vt}from"./CrudTable-4e3fed7c.js";import{_ as ht}from"./CrudModal-b3ba9d09.js";import{u as gt,N as D}from"./Input-4dc6aa48.js";import{u as bt}from"./useCRUD-98c77b73.js";import{A as kt}from"./Add-d4ec7561.js";import{N as K}from"./Switch-884df479.js";import{N as yt,a as I}from"./FormItem-d42d036b.js";import{N as xt,a as _e}from"./RadioGroup-9f11dd0d.js";import{b as _t}from"./Space-5eeaf57e.js";import{N as wt}from"./Popconfirm-48a94d36.js";import"./AppPage-77502b8b.js";import"./Checkbox-09b0afd8.js";import"./Forward-98208075.js";import"./download-953ccaa2.js";import"./get-slot-1efb97e5.js";const It=Be({name:"Remove",render(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},u("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}});function Nt(t){const{textColorDisabled:m}=t;return{iconColorDisabled:m}}const Vt=He({name:"InputNumber",common:Ke,peers:{Button:Ge,Input:We},self:Nt}),Bt=Vt,Rt=Xe([he("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),he("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]);function Ut(t){return t==null||typeof t=="string"&&t.trim()===""?null:Number(t)}function Mt(t){return t.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(t)||/^-?\d*$/.test(t))||t==="-"||t==="-0"}function se(t){return t==null?!0:!Number.isNaN(t)}function we(t,m){return typeof t!="number"?"":m===void 0?String(t):t.toFixed(m)}function ce(t){if(t===null)return null;if(typeof t=="number")return t;{const m=Number(t);return Number.isNaN(m)?null:m}}const Ie=800,Ne=100,St=Object.assign(Object.assign({},Re.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},inputProps:Object,readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},round:{type:Boolean,default:void 0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),Ct=Be({name:"InputNumber",props:St,slots:Object,setup(t){const{mergedBorderedRef:m,mergedClsPrefixRef:g,mergedRtlRef:h}=Je(t),f=Re("InputNumber","-input-number",Rt,Bt,t,g),{localeRef:b}=gt("InputNumber"),N=Qe(t),{mergedSizeRef:F,mergedDisabledRef:y,mergedStatusRef:x}=N,v=R(null),r=R(null),$=R(null),z=R(t.defaultValue),Z=Ye(t,"value"),k=Ze(Z,z),V=R(""),i=e=>{const a=String(e).split(".")[1];return a?a.length:0},l=e=>{const a=[t.min,t.max,t.step,e].map(o=>o===void 0?0:i(o));return Math.max(...a)},s=C(()=>{const{placeholder:e}=t;return e!==void 0?e:b.value.placeholder}),S=C(()=>{const e=ce(t.step);return e!==null?e===0?1:Math.abs(e):1}),fe=C(()=>{const e=ce(t.min);return e!==null?e:null}),pe=C(()=>{const e=ce(t.max);return e!==null?e:null}),T=()=>{const{value:e}=k;if(se(e)){const{format:a,precision:o}=t;a?V.value=a(e):e===null||o===void 0||i(e)>o?V.value=we(e,void 0):V.value=we(e,o)}else V.value=String(e)};T();const L=e=>{const{value:a}=k;if(e===a){T();return}const{"onUpdate:value":o,onUpdateValue:p,onChange:w}=t,{nTriggerFormInput:B,nTriggerFormChange:P}=N;w&&O(w,e),p&&O(p,e),o&&O(o,e),z.value=e,B(),P()},_=({offset:e,doUpdateIfValid:a,fixPrecision:o,isInputing:p})=>{const{value:w}=V;if(p&&Mt(w))return!1;const B=(t.parse||Ut)(w);if(B===null)return a&&L(null),null;if(se(B)){const P=i(B),{precision:q}=t;if(q!==void 0&&q<P&&!o)return!1;let M=Number.parseFloat((B+e).toFixed(q??l(B)));if(se(M)){const{value:oe}=pe,{value:ue}=fe;if(oe!==null&&M>oe){if(!a||p)return!1;M=oe}if(ue!==null&&M<ue){if(!a||p)return!1;M=ue}return t.validator&&!t.validator(M)?!1:(a&&L(M),M)}}return!1},Ue=C(()=>_({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),ee=C(()=>{const{value:e}=k;if(t.validator&&e===null)return!1;const{value:a}=S;return _({offset:-a,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),te=C(()=>{const{value:e}=k;if(t.validator&&e===null)return!1;const{value:a}=S;return _({offset:+a,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function Me(e){const{onFocus:a}=t,{nTriggerFormFocus:o}=N;a&&O(a,e),o()}function Se(e){var a,o;if(e.target===((a=v.value)===null||a===void 0?void 0:a.wrapperElRef))return;const p=_({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(p!==!1){const P=(o=v.value)===null||o===void 0?void 0:o.inputElRef;P&&(P.value=String(p||"")),k.value===p&&T()}else T();const{onBlur:w}=t,{nTriggerFormBlur:B}=N;w&&O(w,e),B(),lt(()=>{T()})}function Ce(e){const{onClear:a}=t;a&&O(a,e)}function ie(){const{value:e}=te;if(!e){ae();return}const{value:a}=k;if(a===null)t.validator||L(ve());else{const{value:o}=S;_({offset:o,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function ne(){const{value:e}=ee;if(!e){le();return}const{value:a}=k;if(a===null)t.validator||L(ve());else{const{value:o}=S;_({offset:-o,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const De=Me,Fe=Se;function ve(){if(t.validator)return null;const{value:e}=fe,{value:a}=pe;return e!==null?Math.max(0,e):a!==null?Math.min(0,a):0}function Te(e){Ce(e),L(null)}function Pe(e){var a,o,p;!((a=$.value)===null||a===void 0)&&a.$el.contains(e.target)&&e.preventDefault(),!((o=r.value)===null||o===void 0)&&o.$el.contains(e.target)&&e.preventDefault(),(p=v.value)===null||p===void 0||p.activate()}let j=null,E=null,W=null;function le(){W&&(window.clearTimeout(W),W=null),j&&(window.clearInterval(j),j=null)}let X=null;function ae(){X&&(window.clearTimeout(X),X=null),E&&(window.clearInterval(E),E=null)}function Oe(){le(),W=window.setTimeout(()=>{j=window.setInterval(()=>{ne()},Ne)},Ie),be("mouseup",document,le,{once:!0})}function Ae(){ae(),X=window.setTimeout(()=>{E=window.setInterval(()=>{ie()},Ne)},Ie),be("mouseup",document,ae,{once:!0})}const $e=()=>{E||ie()},ze=()=>{j||ne()};function Le(e){var a,o;if(e.key==="Enter"){if(e.target===((a=v.value)===null||a===void 0?void 0:a.wrapperElRef))return;_({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((o=v.value)===null||o===void 0||o.deactivate())}else if(e.key==="ArrowUp"){if(!te.value||t.keyboard.ArrowUp===!1)return;e.preventDefault(),_({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&ie()}else if(e.key==="ArrowDown"){if(!ee.value||t.keyboard.ArrowDown===!1)return;e.preventDefault(),_({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&ne()}}function je(e){V.value=e,t.updateValueOnInput&&!t.format&&!t.parse&&t.precision===void 0&&_({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}et(k,()=>{T()});const Ee={focus:()=>{var e;return(e=v.value)===null||e===void 0?void 0:e.focus()},blur:()=>{var e;return(e=v.value)===null||e===void 0?void 0:e.blur()},select:()=>{var e;return(e=v.value)===null||e===void 0?void 0:e.select()}},qe=tt("InputNumber",h,g);return Object.assign(Object.assign({},Ee),{rtlEnabled:qe,inputInstRef:v,minusButtonInstRef:r,addButtonInstRef:$,mergedClsPrefix:g,mergedBordered:m,uncontrolledValue:z,mergedValue:k,mergedPlaceholder:s,displayedValueInvalid:Ue,mergedSize:F,mergedDisabled:y,displayedValue:V,addable:te,minusable:ee,mergedStatus:x,handleFocus:De,handleBlur:Fe,handleClear:Te,handleMouseDown:Pe,handleAddClick:$e,handleMinusClick:ze,handleAddMousedown:Ae,handleMinusMousedown:Oe,handleKeyDown:Le,handleUpdateDisplayedValue:je,mergedTheme:f,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:it(()=>{const{self:{iconColorDisabled:e}}=f.value,[a,o,p,w]=nt(e);return{textColorTextDisabled:`rgb(${a}, ${o}, ${p})`,opacityDisabled:`${w}`}})})},render(){const{mergedClsPrefix:t,$slots:m}=this,g=()=>u(xe,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>ke(m["minus-icon"],()=>[u(ye,{clsPrefix:t},{default:()=>u(It,null)})])}),h=()=>u(xe,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>ke(m["add-icon"],()=>[u(ye,{clsPrefix:t},{default:()=>u(kt,null)})])});return u("div",{class:[`${t}-input-number`,this.rtlEnabled&&`${t}-input-number--rtl`]},u(D,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,round:this.round,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,inputProps:this.inputProps,internalLoadingBeforeSuffix:!0},{prefix:()=>{var f;return this.showButton&&this.buttonPlacement==="both"?[g(),ge(m.prefix,b=>b?u("span",{class:`${t}-input-number-prefix`},b):null)]:(f=m.prefix)===null||f===void 0?void 0:f.call(m)},suffix:()=>{var f;return this.showButton?[ge(m.suffix,b=>b?u("span",{class:`${t}-input-number-suffix`},b):null),this.buttonPlacement==="right"?g():null,h()]:(f=m.suffix)===null||f===void 0?void 0:f.call(m)}}))}}),Ve=["mdi-air-humidifier-off","mdi-chili-off","mdi-cigar-off","mdi-clock-time-eight","mdi-clock-time-eight-outline","mdi-clock-time-eleven","mdi-clock-time-eleven-outline","mdi-clock-time-five","mdi-clock-time-five-outline","mdi-clock-time-four","mdi-clock-time-four-outline","mdi-clock-time-nine","mdi-clock-time-nine-outline","mdi-clock-time-one","mdi-clock-time-one-outline","mdi-clock-time-seven","mdi-clock-time-seven-outline","mdi-clock-time-six","mdi-clock-time-six-outline","mdi-clock-time-ten","mdi-clock-time-ten-outline","mdi-clock-time-three","mdi-clock-time-three-outline","mdi-clock-time-twelve","mdi-clock-time-twelve-outline","mdi-clock-time-two","mdi-clock-time-two-outline","mdi-cog-refresh","mdi-cog-refresh-outline","mdi-cog-sync","mdi-cog-sync-outline","mdi-content-save-cog","mdi-content-save-cog-outline","mdi-cosine-wave","mdi-cube-off","mdi-cube-off-outline","mdi-dome-light","mdi-download-box","mdi-download-box-outline","mdi-download-circle","mdi-download-circle-outline","mdi-fan-alert","mdi-fan-chevron-down","mdi-fan-chevron-up","mdi-fan-minus","mdi-fan-plus","mdi-fan-remove","mdi-fan-speed-1","mdi-fan-speed-2","mdi-fan-speed-3","mdi-food-drumstick","mdi-food-drumstick-off","mdi-food-drumstick-off-outline","mdi-food-drumstick-outline","mdi-food-steak","mdi-food-steak-off","mdi-fuse-alert","mdi-fuse-off","mdi-heart-minus","mdi-heart-minus-outline","mdi-heart-off-outline","mdi-heart-plus","mdi-heart-plus-outline","mdi-heart-remove","mdi-heart-remove-outline","mdi-hours-24","mdi-incognito-circle","mdi-incognito-circle-off","mdi-lingerie","mdi-microwave-off","mdi-minus-circle-off","mdi-minus-circle-off-outline","mdi-motion-sensor-off","mdi-pail-minus","mdi-pail-minus-outline","mdi-pail-off","mdi-pail-off-outline","mdi-pail-outline","mdi-pail-plus","mdi-pail-plus-outline","mdi-pail-remove","mdi-pail-remove-outline","mdi-pine-tree-fire","mdi-power-plug-off-outline","mdi-power-plug-outline","mdi-printer-eye","mdi-printer-search","mdi-puzzle-check","mdi-puzzle-check-outline","mdi-rug","mdi-sawtooth-wave","mdi-set-square","mdi-smoking-pipe-off","mdi-spoon-sugar","mdi-square-wave","mdi-table-split-cell","mdi-ticket-percent-outline","mdi-triangle-wave","mdi-waveform","mdi-wizard-hat","mdi-ab-testing","mdi-abjad-arabic","mdi-abjad-hebrew","mdi-abugida-devanagari","mdi-abugida-thai","mdi-access-point","mdi-access-point-network","mdi-access-point-network-off","mdi-account","mdi-account-alert","mdi-account-alert-outline","mdi-account-arrow-left","mdi-account-arrow-left-outline","mdi-account-arrow-right","mdi-account-arrow-right-outline","mdi-account-box","mdi-account-box-multiple","mdi-account-box-multiple-outline","mdi-account-box-outline","mdi-account-cancel","mdi-account-cancel-outline","mdi-account-cash","mdi-account-cash-outline","mdi-account-check","mdi-account-check-outline","mdi-account-child","mdi-account-child-circle","mdi-account-child-outline","mdi-account-circle","mdi-account-circle-outline","mdi-account-clock","mdi-account-clock-outline","mdi-account-cog","mdi-account-cog-outline","mdi-account-convert","mdi-account-convert-outline","mdi-account-cowboy-hat","mdi-account-details","mdi-account-details-outline","mdi-account-edit","mdi-account-edit-outline","mdi-account-group","mdi-account-group-outline","mdi-account-hard-hat","mdi-account-heart","mdi-account-heart-outline","mdi-account-key","mdi-account-key-outline","mdi-account-lock","mdi-account-lock-outline","mdi-account-minus","mdi-account-minus-outline","mdi-account-multiple","mdi-account-multiple-check","mdi-account-multiple-check-outline","mdi-account-multiple-minus","mdi-account-multiple-minus-outline","mdi-account-multiple-outline","mdi-account-multiple-plus","mdi-account-multiple-plus-outline","mdi-account-multiple-remove","mdi-account-multiple-remove-outline","mdi-account-music","mdi-account-music-outline","mdi-account-network","mdi-account-network-outline","mdi-account-off","mdi-account-off-outline","mdi-account-outline","mdi-account-plus","mdi-account-plus-outline","mdi-account-question","mdi-account-question-outline","mdi-account-remove","mdi-account-remove-outline","mdi-account-search","mdi-account-search-outline","mdi-account-settings","mdi-account-settings-outline","mdi-account-star","mdi-account-star-outline","mdi-account-supervisor","mdi-account-supervisor-circle","mdi-account-supervisor-outline","mdi-account-switch","mdi-account-switch-outline","mdi-account-tie","mdi-account-tie-outline","mdi-account-tie-voice","mdi-account-tie-voice-off","mdi-account-tie-voice-off-outline","mdi-account-tie-voice-outline","mdi-account-voice","mdi-adjust","mdi-adobe","mdi-adobe-acrobat","mdi-air-conditioner","mdi-air-filter","mdi-air-horn","mdi-air-humidifier","mdi-air-purifier","mdi-airbag","mdi-airballoon","mdi-airballoon-outline","mdi-airplane","mdi-airplane-landing","mdi-airplane-off","mdi-airplane-takeoff","mdi-airport","mdi-alarm","mdi-alarm-bell","mdi-alarm-check","mdi-alarm-light","mdi-alarm-light-outline","mdi-alarm-multiple","mdi-alarm-note","mdi-alarm-note-off","mdi-alarm-off","mdi-alarm-plus","mdi-alarm-snooze","mdi-album","mdi-alert","mdi-alert-box","mdi-alert-box-outline","mdi-alert-circle","mdi-alert-circle-check","mdi-alert-circle-check-outline","mdi-alert-circle-outline"],Dt={class:"w-full"},Ft={key:0,class:"h-[150px] w-[300px] overflow-y-scroll"},Tt=["onClick"],Pt={key:1},Ot={__name:"IconPicker",props:{value:String},emits:["update:value"],setup(t,{emit:m}){const g=t,h=m,f=R(g.value),b=R(Ve.filter(y=>y.includes(f.value)));function N(){b.value=Ve.filter(y=>y.includes(f.value))}function F(y){f.value=y,h("update:value",f.value)}return at(f,()=>{N(),h("update:value",f.value)},{debounce:500}),(y,x)=>(U(),H("div",Dt,[d(n(dt),{trigger:"click",placement:"bottom-start"},{trigger:c(()=>[d(n(D),{value:f.value,"onUpdate:value":[x[0]||(x[0]=v=>f.value=v),N],placeholder:"请输入图标名称"},{prefix:c(()=>x[1]||(x[1]=[me("span",{class:"i-mdi:magnify text-base"},null,-1)])),suffix:c(()=>[d(Y,{icon:f.value,size:18},null,8,["icon"])]),_:1},8,["value"])]),footer:c(()=>x[2]||(x[2]=[G(" 更多图标去 "),me("a",{class:"text-blue",target:"_blank",href:"https://icones.js.org/collection/all"}," Icones ",-1),G(" 查看 ")])),default:c(()=>[b.value.length?(U(),H("ul",Ft,[(U(!0),H(ot,null,ut(b.value,(v,r)=>(U(),H("li",{key:r,class:"mx-1.5 inline-block cursor-pointer hover:text-cyan",onClick:$=>F(v)},[d(Y,{icon:v,size:18},null,8,["icon"])],8,Tt))),128))])):(U(),H("div",Pt,[d(Y,{icon:f.value,size:18},null,8,["icon"])]))]),_:1})]))}},ti=Object.assign({name:"菜单管理"},{__name:"index",setup(t){const m=R(null),g=R({keyword:""}),h={order_num:1,is_hidden:!1,is_catalogue:!1,is_external:!1,keep_alive:!1,icon:"mdi-account",order_num:1,name:"",path:"",redirect:"",component:"",parent_id:0},{modalVisible:f,modalTitle:b,modalLoading:N,handleAdd:F,handleDelete:y,handleEdit:x,handleSave:v,modalForm:r,modalFormRef:$}=bt({name:"菜单",initForm:h,doCreate:A.saveOrUpdateMenu,doDelete:A.deleteMenu,doUpdate:A.saveOrUpdateMenu,refresh:()=>{var i;return(i=m.value)==null?void 0:i.handleSearch()}});rt(()=>{var i;(i=m.value)==null||i.handleSearch()});const z=[{title:"菜单名称",key:"name",width:100,render:i=>{const l=[];return l.push(u("span",i.name)),i.parent_id===0?l.push(u(re,{type:i.is_catalogue?"info":"success",class:"ml-1.5"},{default:()=>i.is_catalogue?"目录":"一级菜单"})):l.push(u(re,{type:"default",class:"ml-1.5"},{default:()=>"子菜单"})),i.is_external&&l.push(u(re,{type:"warning",class:"ml-1.5"},{default:()=>"外链"})),l}},{title:"图标",key:"icon",width:30,render(i){return u(Y,{icon:i.icon,size:20})}},{title:"排序",key:"order_num",width:30,ellipsis:{tooltip:!0}},{title:"访问路径",key:"path",width:60,ellipsis:{tooltip:!0}},{title:"跳转路径",key:"redirect",width:80,render(i){return i.parent_id===0&&!i.is_catalogue?u("span",i.redirect):u("span","-")}},{title:"组件路径",key:"component",width:80,render(i){return i.is_catalogue?u("span","-"):u("span",i.component)}},{title:"保活",key:"keep_alive",width:30,fixed:"left",render(i){return u(K,{size:"small",rubberBand:!1,value:i.keep_alive,loading:!!i.publishing,onUpdateValue:()=>Z(i)})}},{title:"隐藏",key:"is_hidden",width:30,fixed:"left",render(i){return u(K,{size:"small",rubberBand:!1,value:i.is_hidden,loading:!!i.publishing,onUpdateValue:()=>k(i)})}},{title:"更新日期",key:"updated_at",width:70,render(i){return u("span",mt(i.updated_at))}},{title:"操作",key:"actions",width:115,align:"center",fixed:"right",render(i){return[u(Q,{size:"tiny",quaternary:!0,type:"primary",style:`display: ${!i.is_catalogue&&i.parent_id===0?"":"none"};`,onClick:()=>{h.component="",h.parent_id=i.id,h.is_catalogue=!1,F()}},{default:()=>"新增",icon:()=>u("i",{class:"i-material-symbols:add"})}),u(Q,{size:"tiny",quaternary:!0,type:"info",onClick:()=>{x(i)}},{default:()=>"编辑",icon:()=>u("i",{class:"i-material-symbols:edit-outline"})}),u(wt,{onPositiveClick:()=>y(i.id,!1)},{trigger:()=>u(Q,{size:"tiny",quaternary:!0,type:"error"},{default:()=>"删除",icon:()=>u("i",{class:"i-material-symbols:delete-outline"})}),default:()=>u("div",{},"确定删除该菜单吗?")})]}}];async function Z(i){if(i.id){i.publishing=!0,i.keep_alive=!i.keep_alive;try{await A.saveOrUpdateMenu(i),$message==null||$message.success(i.keep_alive?"已保活":"已取消保活")}catch(l){i.keep_alive=!i.keep_alive,console.error(l)}finally{i.publishing=!1}}}async function k(i){if(i.id){i.publishing=!0,i.is_hidden=!i.is_hidden;try{await A.saveOrUpdateMenu(i),$message==null||$message.success(i.is_hidden?"已隐藏":"已取消隐藏")}catch(l){i.is_hidden=!i.is_hidden,console.error(l)}finally{i.publishing=!1}}}function V(){h.is_catalogue=!0,h.component="Layout",h.parent_id=0,F()}return(i,l)=>(U(),J(ft,{title:"菜单管理"},{action:c(()=>[d(n(Q),{type:"primary",onClick:V},{icon:c(()=>l[14]||(l[14]=[me("span",{class:"i-material-symbols:add"},null,-1)])),default:c(()=>[l[15]||(l[15]=G(" 新建菜单 "))]),_:1})]),default:c(()=>[d(vt,{ref_key:"$table",ref:m,"query-items":g.value,"onUpdate:queryItems":l[2]||(l[2]=s=>g.value=s),"is-pagination":!1,columns:z,"get-data":n(A).getMenus,"single-line":!0},{queryBar:c(()=>[d(pt,{label:"菜单名","label-width":50},{default:c(()=>[d(n(D),{value:g.value.keyword,"onUpdate:value":l[0]||(l[0]=s=>g.value.keyword=s),clearable:"",type:"text",placeholder:"请输入菜单名",onKeydown:l[1]||(l[1]=st(s=>{var S;return(S=m.value)==null?void 0:S.handleSearch()},["enter"]))},null,8,["value"])]),_:1})]),_:1},8,["query-items","get-data"]),d(ht,{visible:n(f),"onUpdate:visible":l[13]||(l[13]=s=>ct(f)?f.value=s:null),title:n(b),loading:n(N),onSave:n(v)},{default:c(()=>[d(n(yt),{ref_key:"modalFormRef",ref:$,"label-placement":"left","label-align":"left","label-width":80,model:n(r)},{default:c(()=>[n(r).parent_id===0?(U(),J(n(I),{key:0,label:"菜单类型",path:"type"},{default:c(()=>[d(n(xt),{value:n(r).is_catalogue,"onUpdate:value":l[3]||(l[3]=s=>n(r).is_catalogue=s),name:"radiogroup"},{default:c(()=>[d(n(_t),null,{default:c(()=>[d(n(_e),{value:!0},{default:c(()=>l[16]||(l[16]=[G(" 目录 ")])),_:1}),d(n(_e),{value:!1},{default:c(()=>l[17]||(l[17]=[G(" 一级菜单 ")])),_:1})]),_:1})]),_:1},8,["value"])]),_:1})):de("",!0),d(n(I),{label:"菜单名称",path:"name"},{default:c(()=>[d(n(D),{value:n(r).name,"onUpdate:value":l[4]||(l[4]=s=>n(r).name=s),placeholder:"请输入菜单名称"},null,8,["value"])]),_:1}),d(n(I),{label:"菜单图标",path:"icon"},{default:c(()=>[d(Ot,{value:n(r).icon,"onUpdate:value":l[5]||(l[5]=s=>n(r).icon=s)},null,8,["value"])]),_:1}),n(r).is_catalogue?de("",!0):(U(),J(n(I),{key:1,label:"组件路径",path:"component"},{default:c(()=>[d(n(D),{value:n(r).component,"onUpdate:value":l[6]||(l[6]=s=>n(r).component=s),placeholder:"请输入组件路径"},null,8,["value"])]),_:1})),d(n(I),{label:"访问路径",path:"path"},{default:c(()=>[d(n(D),{value:n(r).path,"onUpdate:value":l[7]||(l[7]=s=>n(r).path=s),placeholder:"请输入访问路径"},null,8,["value"])]),_:1}),n(r).is_catalogue?de("",!0):(U(),J(n(I),{key:2,label:"跳转路径",path:"redirect"},{default:c(()=>[d(n(D),{value:n(r).redirect,"onUpdate:value":l[8]||(l[8]=s=>n(r).redirect=s),disabled:n(r).parent_id!==0,placeholder:"只有一级菜单可以设置跳转路径"},null,8,["value","disabled"])]),_:1})),d(n(I),{label:"显示排序",path:"order_num"},{default:c(()=>[d(n(Ct),{value:n(r).order_num,"onUpdate:value":l[9]||(l[9]=s=>n(r).order_num=s)},null,8,["value"])]),_:1}),d(n(I),{label:"是否隐藏",path:"is_hidden"},{default:c(()=>[d(n(K),{value:n(r).is_hidden,"onUpdate:value":l[10]||(l[10]=s=>n(r).is_hidden=s)},null,8,["value"])]),_:1}),d(n(I),{label:"是否外链",path:"is_external"},{default:c(()=>[d(n(K),{value:n(r).is_external,"onUpdate:value":l[11]||(l[11]=s=>n(r).is_external=s)},null,8,["value"])]),_:1}),d(n(I),{label:"KeepAlive",path:"keep_alive"},{default:c(()=>[d(n(K),{value:n(r).keep_alive,"onUpdate:value":l[12]||(l[12]=s=>n(r).keep_alive=s)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","loading","onSave"])]),_:1}))}});export{ti as default};
