import{r as w,o as T,b as i,c as p,f as e,i as r,y as u,h as g,q as y,u as b,R,F as h,z as A,A as _,B,C as S,m as C,s as k,T as Y,I as q,w as H,l as M,x as N,H as I,j as L,J as E,K as F,G as D,n as V,L as z}from"./index.08377aad.js";import{m as J}from"./marked.esm.ed820ee3.js";import{H as $,g as G,b as O,j as U,a as K}from"./bash.811bea85.js";import{d as j}from"./dayjs.min.f2568ad6.js";import{A as W}from"./AppFooter.1997c78d.js";import{_ as P}from"./Comment.68645cc8.js";import"./ULoading.6ad0004d.js";const Q={class:"mx-4 mt-12 hidden text-center text-light lg:block"},X={class:"text-3xl"},Z={class:"f-c-c py-2"},ee={class:"f-c-c"},te={class:"mx-4 mt-12 block text-left text-light lg:hidden space-y-1.5"},se={class:"text-2xl"},le={class:"mb-1 mt-2 flex flex-wrap items-center lg:justify-center"},ae={class:"flex gap-2"},ne={class:"f-c-c"},re={class:"border-1px border-blue rounded-xl px-2 py-1 text-sm text-white"},oe={__name:"BannerInfo",props:{article:{}},setup(s){const c=w(0),l=w("");T(()=>{c.value=n(s.article.content).length,l.value=`${Math.round(c.value/400)}\u5206\u949F`});function n(m){return m.replace(/<\/?[^>]*>/g,"").replace(/[|]*\n/,"").replace(/&npsp;/gi,"")}function a(m){return j(m).format("YYYY-MM-DD")}return(m,t)=>{var o,d,x,f;return i(),p(h,null,[e("div",Q,[e("h1",X,r(s.article.title),1),e("p",Z,[t[1]||(t[1]=e("span",{class:"i-mdi:calendar mr-1 text-lg"},null,-1)),u(" \u53D1\u5E03\u4E8E "+r(a(s.article.created_at))+" ",1),t[2]||(t[2]=e("span",{class:"px-2"},"|",-1)),t[3]||(t[3]=e("span",{class:"i-mdi:update mr-1 text-lg"},null,-1)),u(" \u66F4\u65B0\u4E8E "+r(a(s.article.updated_at))+" ",1),t[4]||(t[4]=e("span",{class:"px-2"},"|",-1)),g(b(R),{to:`/categories/${(o=s.article.category)==null?void 0:o.id}?name=${(d=s.article.category)==null?void 0:d.name}`,class:"f-c-c"},{default:y(()=>{var v;return[t[0]||(t[0]=e("span",{class:"i-material-symbols:menu mr-1 text-lg"},null,-1)),u(" "+r((v=s.article.category)==null?void 0:v.name),1)]}),_:1},8,["to"])]),e("div",ee,[t[5]||(t[5]=e("span",{class:"i-ic:twotone-text-snippet mr-1 text-lg"},null,-1)),u(" \u5B57\u6570\u7EDF\u8BA1\uFF1A"+r(c.value)+" ",1),t[6]||(t[6]=e("span",{class:"px-2"},"|",-1)),t[7]||(t[7]=e("span",{class:"i-mdi:timelapse mr-1 text-lg"},null,-1)),u(" \u9605\u8BFB\u65F6\u957F\uFF1A"+r(l.value)+" ",1),t[8]||(t[8]=e("span",{class:"px-2"},"|",-1)),t[9]||(t[9]=e("span",{class:"i-mdi:eye mr-1 text-lg"},null,-1)),u(" \u9605\u8BFB\u91CF\uFF1A"+r(s.article.view_count)+" ",1),t[10]||(t[10]=e("span",{class:"px-2"},"|",-1)),t[11]||(t[11]=e("span",{class:"i-ic:outline-insert-comment mr-1 text-lg"},null,-1)),u(" \u8BC4\u8BBA\u6570\uFF1A"+r(s.article.comment_count),1)])]),e("div",te,[e("h1",se,r(s.article.title),1),e("div",le,[t[12]||(t[12]=e("span",{class:"i-mdi:calendar mr-1"},null,-1)),u(" \u53D1\u5E03\u4E8E "+r(a(s.article.created_at))+" ",1),t[13]||(t[13]=e("span",{class:"px-2"},"|",-1)),t[14]||(t[14]=e("span",{class:"i-mdi:update mr-1"},null,-1)),u(" \u66F4\u65B0\u4E8E "+r(a(s.article.updated_at)),1)]),e("div",ae,[e("div",ne,[g(b(R),{to:`/categories/${(x=s.article.category)==null?void 0:x.id}?name=${(f=s.article.category)==null?void 0:f.name}`},{default:y(()=>{var v;return[t[15]||(t[15]=e("span",{class:"i-material-symbols:menu mr-1"},null,-1)),u(" "+r((v=s.article.category)==null?void 0:v.name),1)]}),_:1},8,["to"])]),(i(!0),p(h,null,A(s.article.tags,v=>(i(),_(b(R),{key:v.id,to:`/tags/${v.id}?name=${v.name}`},{default:y(()=>[e("span",re,r(v.name),1)]),_:2},1032,["to"]))),128))]),e("div",null,[t[16]||(t[16]=e("span",{class:"i-ic:twotone-text-snippet mr-1"},null,-1)),u(" \u5B57\u6570\u7EDF\u8BA1\uFF1A"+r(c.value)+" ",1),t[17]||(t[17]=e("span",{class:"px-2"},"|",-1)),t[18]||(t[18]=e("span",{class:"i-mdi:timelapse mr-1"},null,-1)),u(" \u9605\u8BFB\u65F6\u957F\uFF1A"+r(l.value),1)]),e("div",null,[t[19]||(t[19]=e("span",{class:"i-mdi:eye mr-1"},null,-1)),u(" \u9605\u8BFB\u91CF\uFF1A"+r(s.article.view_count)+" ",1),t[20]||(t[20]=e("span",{class:"px-2"},"|",-1)),t[21]||(t[21]=e("span",{class:"i-ic:outline-insert-comment mr-1"},null,-1)),u(" \u8BC4\u8BBA\u6570\uFF1A"+r(s.article.comment_count),1)])])],64)}}},ie={class:"border-1 border-lightblue border-dashed px-4 py-3 leading-7"},ce={class:"relative"},de=["href"],ue={__name:"Copyright",setup(s){const{blogConfig:c}=B(S()),l=window.location.href;return(n,a)=>{const m=C("RouterLink");return i(),p("div",ie,[e("div",ce,[a[0]||(a[0]=e("div",{class:"absolute right-0 top-0 h-5 w-5 border-4px border-blue rounded-full bg-white"},null,-1)),a[1]||(a[1]=e("span",{class:"font-bold color-#49b1f5"}," \u6587\u7AE0\u4F5C\u8005\uFF1A ",-1)),g(m,{to:"/",class:"color-#99a9bf !underline"},{default:y(()=>[u(r(b(c).website_author),1)]),_:1})]),e("div",null,[a[2]||(a[2]=e("span",{class:"font-bold color-#49b1f5"}," \u6587\u7AE0\u94FE\u63A5\uFF1A ",-1)),e("a",{href:b(l),class:"color-#99a9bf !underline"},r(b(l)),9,de)]),a[3]||(a[3]=e("div",null,[e("span",{class:"font-bold color-#49b1f5"}," \u7248\u6743\u58F0\u660E\uFF1A "),e("span",null,[u(" \u672C\u535A\u5BA2\u6240\u6709\u6587\u7AE0\u9664\u7279\u522B\u58F0\u660E\u5916\uFF0C\u5747\u91C7\u7528 "),e("a",{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/",target:"_blank",class:"color-#99a9bf !underline"}," CC BY-NC-SA 4.0 "),u(" \u8BB8\u53EF\u534F\u8BAE\u3002\u8F6C\u8F7D\u8BF7\u6CE8\u660E\u6587\u7AE0\u51FA\u5904\u3002 ")])],-1))])}}},me={class:"card-view space-y-3"},pe={class:"space-y-1"},fe={class:"flex items-center"},ge=["src"],xe={class:"flex-1 overflow-hidden break-all pl-2"},ve={class:"text-sm text-blueGray"},be={__name:"LatestList",props:{articleList:Array},setup(s){return(c,l)=>{const n=C("RouterLink");return i(),_(Y,{name:"slide-fade",appear:""},{default:y(()=>[e("div",me,[l[0]||(l[0]=e("div",{class:"flex items-center"},[e("span",{class:"i-akar-icons:clock"}),e("span",{class:"ml-2"}," \u6700\u65B0\u6587\u7AE0 ")],-1)),e("ul",pe,[(i(!0),p(h,null,A(s.articleList,a=>(i(),p("li",{key:a.title,class:"p-1 hover:bg-gray-200"},[g(n,{to:`/article/${a.id}`,class:"border-b-1 border-dashed last:border-none"},{default:y(()=>[e("div",fe,[e("img",{src:b(k)(a.img),class:"h-15 w-15 overflow-hidden"},null,8,ge),e("div",xe,[e("p",null,r(a.title),1),e("p",ve,r(b(j)(a.created_at).format("YYYY-MM-DD")),1)])])]),_:2},1032,["to"])]))),128))])])]),_:1})}}},ye={class:"f-c-c color-#fff space-x-4"},we={__name:"Reward",props:{articleId:Number,likeCount:Number},setup(s){const[c,l]=[q(),S()],n=w(s.likeCount);H(()=>s.likeCount,o=>n.value=o);async function a(){var o,d;if(!c.userId){l.setLoginFlag(!0);return}try{await I.saveLikeArticle(s.articleId),c.articleLikeSet.includes(s.articleId)?(n.value--,(o=window.$message)==null||o.info("\u5DF2\u53D6\u6D88")):(n.value++,(d=window.$message)==null||d.success("\u5DF2\u70B9\u8D5E")),c.articleLike(s.articleId)}catch(x){console.error(x)}}const m=M(()=>c.articleLikeSet.includes(s.articleId));function t(){var o;(o=window.$message)==null||o.info("\u6682\u65F6\u4E0D\u652F\u6301\u6253\u8D4F\u529F\u80FD")}return(o,d)=>(i(),p("div",ye,[e("button",{class:N(["w-[110px] f-c-c rounded-sm py-1.5 text-sm",m.value?"bg-red":"bg-gray"]),onClick:a},[d[0]||(d[0]=e("span",{class:"i-mdi:thumb-up mr-1"},null,-1)),u(" \u70B9\u8D5E "+r(n.value),1)],2),e("button",{class:"w-[110px] f-c-c rounded-sm bg-blue py-1.5 text-sm",onClick:t},d[1]||(d[1]=[e("span",{class:"i-mdi:qrcode mr-1"},null,-1),u(" \u6253\u8D4F ")]))]))}},he={class:"flex items-center justify-between"},_e={class:"space-x-2"},$e={class:"border-1px border-blue rounded-xl px-2 py-1 text-xs color-#49b1f5 lg:text-sm"},ke={__name:"Forward",props:{tagList:{type:Array,default:()=>[]}},setup(s){function c(){var l;(l=window.$message)==null||l.info("\u6682\u65F6\u4E0D\u652F\u6301\u5206\u4EAB\u529F\u80FD")}return(l,n)=>{const a=C("RouterLink");return i(),p("div",he,[e("div",_e,[(i(!0),p(h,null,A(s.tagList,m=>(i(),_(a,{key:m.id,to:`/tags/${m.id}?name=${m.name}`},{default:y(()=>[e("span",$e,r(m.name),1)]),_:2},1032,["to"]))),128))]),e("div",{class:"flex justify-between text-xl space-x-2",onClick:c},n[0]||(n[0]=[e("span",{class:"i-mdi:wechat cursor-pointer text-green"},null,-1),e("span",{class:"i-mdi:sina-weibo cursor-pointer text-orange"},null,-1),e("span",{class:"i-mdi:qqchat cursor-pointer text-red"},null,-1),e("span",{class:"i-mdi:telegram cursor-pointer text-blue"},null,-1)]))])}}},Le={class:"flex flex-wrap bg-#000 text-white lg:flex-nowrap"},Ae={key:0,class:"group relative h-[150px] w-full overflow-hidden"},Ce=["src"],Re={class:"absolute top-1/2 w-full px-10 text-left leading-6 -translate-y-1/2"},Te={key:1,class:"group relative h-[150px] w-full overflow-hidden"},je=["src"],Se={class:"absolute top-1/2 w-full px-10 text-right leading-6 -translate-y-1/2"},Ye={__name:"LastNext",props:{lastArticle:{},nextArticle:{}},setup(s){return(c,l)=>{const n=C("RouterLink");return i(),p("div",Le,[s.lastArticle.id?(i(),p("div",Ae,[g(n,{to:`/article/${s.lastArticle.id}`},{default:y(()=>[e("img",{src:b(k)(s.lastArticle.img),class:"h-full w-full object-cover opacity-40 transition-600 group-hover:scale-110 group-hover:opacity-80"},null,8,Ce),e("div",Re,[l[0]||(l[0]=e("p",null," \u4E0A\u4E00\u7BC7 ",-1)),e("p",null,r(s.lastArticle.title),1)])]),_:1},8,["to"])])):L("",!0),s.nextArticle.id?(i(),p("div",Te,[g(n,{to:`/article/${s.nextArticle.id}`},{default:y(()=>[e("img",{src:b(k)(s.nextArticle.img),class:"h-full w-full object-cover opacity-40 transition-600 group-hover:scale-110 group-hover:opacity-80"},null,8,je),e("div",Se,[l[1]||(l[1]=e("p",null," \u4E0B\u4E00\u7BC7 ",-1)),e("p",null,r(s.nextArticle.title),1)])]),_:1},8,["to"])])):L("",!0)])}}},Me={key:0,class:"space-y-3"},Ne={class:"grid grid-cols-12 gap-1.5"},Ie={class:"relative h-[150px] f-c-c overflow-hidden rounded bg-black lg:h-[200px]"},De=["src"],Be={class:"absolute text-center text-white"},qe={class:"f-c-c"},He={__name:"Recommend",props:{recommendList:Array},setup(s){return(c,l)=>{const n=C("RouterLink");return s.recommendList.length?(i(),p("div",Me,[l[1]||(l[1]=e("p",{class:"flex items-center text-xl font-bold"},[e("span",{class:"i-mdi:thumb-up mr-3 text-orange"}),u(" \u76F8\u5173\u63A8\u8350 ")],-1)),e("div",Ne,[(i(!0),p(h,null,A(s.recommendList,a=>(i(),p("div",{key:a.id,class:"group col-span-12 lg:col-span-4"},[g(n,{to:`/article/${a.id}`},{default:y(()=>[e("div",Ie,[e("img",{src:b(k)(a.img),class:"h-full w-full object-cover opacity-40 transition-600 group-hover:scale-110 group-hover:opacity-80"},null,8,De),e("div",Be,[e("p",qe,[l[0]||(l[0]=e("span",{class:"i-mdi:calendar mr-1"},null,-1)),u(" "+r(b(j)(a.created_at).format("YYYY-MM-DD")),1)]),e("p",null,r(a.title),1)])])]),_:2},1032,["to"])]))),128))])])):L("",!0)}}},Ee={class:"card-view space-y-2"},Fe=["onClick"],Ve={__name:"Catalogue",props:{previewRef:{type:Object,required:!0}},setup(s){T(()=>{a()});const c=w(""),l=w([]),n=Array.from(s.previewRef.querySelectorAll("h1,h2,h3,h4,h5,h6"));function a(){const o=Array.from(n).filter(f=>!!f.innerText.trim()),d=Array.from(new Set(o.map(f=>f.tagName))).sort();let x=0;for(let f=0;f<n.length;f++){const v=n[f].textContent.trim();n[f].id=`${v}-${x++}`,l.value.push({id:n[f].id,name:n[f].innerText,indent:d.indexOf(n[f].tagName)})}}function m(o){const d=document.getElementById(o);window.scrollTo({behavior:"smooth",top:d.offsetTop-40}),setTimeout(()=>c.value=o,600)}const{y:t}=E();return F(t,()=>{l.value.forEach(o=>{const d=n.find(x=>x.id===o.id);d&&t.value>=d.offsetTop-50&&(c.value=d.id)})},{throttle:200}),(o,d)=>(i(),_(Y,{name:"slide-fade",appear:""},{default:y(()=>[e("div",Ee,[d[0]||(d[0]=e("div",{class:"flex items-center"},[e("span",{class:"i-fa-solid:list-ul"}),e("span",{class:"ml-2"},"\u76EE\u5F55")],-1)),e("ul",null,[(i(!0),p(h,null,A(l.value,x=>(i(),p("li",{key:x.id},[e("div",{class:N(["cursor-pointer border-l-4 border-transparent rounded py-1 text-sm color-#666261 hover:bg-#00c4b6 hover:bg-opacity-30",x.id===c.value&&"bg-#00c4b6 text-white border-l-#009d92"]),style:D({paddingLeft:`${5+x.indent*15}px`}),onClick:f=>m(x.id)},r(x.name),15,Fe)]))),128))])])]),_:1}))}},ze={class:"flex-1"},Je={class:"card-fade-up grid grid-cols-12 mx-auto mb-3 mt-[380px] gap-4 px-1 lg:mt-[440px] lg:max-w-[1200px]"},Ge={class:"card-view col-span-12 mx-2 pt-7 lg:col-span-9 lg:mx-0"},Oe=["innerHTML"],Ue={class:"col-span-0 lg:col-span-3"},Ke={class:"sticky top-5 hidden lg:block space-y-4"},st={__name:"index",setup(s){$.registerLanguage("go",G),$.registerLanguage("bash",O),$.registerLanguage("json",U),$.registerLanguage("javascript",K);const c=z(),l=w({id:0,title:"",content:"",created_at:"",updated_at:"",like_count:0,view_count:0,comment_count:0,img:"",newest_articles:[],tags:[],category:{},next_article:{},last_article:{},recommend_articles:[]}),n=w(null),a=w(!0);T(async()=>{try{const t=await I.getArticleDetail(c.params.id);l.value=t.data,l.value.content=await J.parse(t.data.content,{async:!0}),await V(),document.querySelectorAll("pre code").forEach(o=>$.highlightElement(o)),window.MathJax.typeset()}catch(t){console.error(t)}finally{a.value=!1}});const m=M(()=>l.value.img?`background: url('${k(l.value.img)}') center center / cover no-repeat;`:"background: rgba(0,0,0,0.1) center center / cover no-repeat;");return(t,o)=>(i(),p(h,null,[e("div",{style:D(m.value),class:"banner-fade-down absolute inset-x-0 top-0 h-[360px] f-c-c lg:h-[400px]"},[a.value?L("",!0):(i(),_(oe,{key:0,article:l.value},null,8,["article"]))],4),e("main",ze,[e("div",Je,[e("div",Ge,[e("article",{ref_key:"previewRef",ref:n,class:"max-w-none prose prose-truegray lg:mx-10",innerHTML:l.value.content},null,8,Oe),g(ue,{class:"my-5 lg:mx-5"}),g(ke,{"tag-list":l.value.tags,class:"mb-12 lg:mx-5"},null,8,["tag-list"]),g(we,{"article-id":l.value.id,"like-count":l.value.like_count,class:"mb-10"},null,8,["article-id","like-count"]),g(Ye,{"last-article":l.value.last_article,"next-article":l.value.next_article,class:"lg:mx-5"},null,8,["last-article","next-article"]),g(He,{"recommend-list":l.value.recommend_articles,class:"mt-7 lg:mx-5"},null,8,["recommend-list"]),o[0]||(o[0]=e("hr",{class:"my-10 border-2 border-color-#d2ebfd border-dashed lg:mx-5"},null,-1)),g(P,{type:1,class:"lg:mx-5"})]),e("div",Ue,[e("div",Ke,[a.value?L("",!0):(i(),_(Ve,{key:0,"preview-ref":n.value},null,8,["preview-ref"])),g(be,{"article-list":l.value.newest_articles},null,8,["article-list"])])])])]),e("footer",null,[g(W)])],64))}};export{st as default};
